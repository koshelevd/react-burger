(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{111:function(e,t,n){e.exports={main:"main-page_main__2bldC"}},112:function(e,t,n){e.exports={main:"feed-page_main__2Tr7L"}},116:function(e,t,n){e.exports={root:"modal-overlay_root__17qNp"}},118:function(e,t,n){e.exports={element:"draggable-constructor-element_element__Rps_E"}},12:function(e,t,n){e.exports={header:"app-header_header__3e8Wq",nav:"app-header_nav__1KYZX",menu:"app-header_menu__3zdQQ",menu_right:"app-header_menu_right__1N_uo",item:"app-header_item__VS6Go",logo:"app-header_logo__1tYut",link:"app-header_link__3YlVj",text:"app-header_text__2BxaU",active:"app-header_active__YRgFm"}},131:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(34),a=n.n(c),i=n(45),o=n(11),l=(n(131),n(7)),d=n(110),u=n(2),j=n(214),m=n(120),f=n(111),p=n.n(f),b=n(0),x=function(){return Object(b.jsx)("main",{className:"".concat(p.a.main," pl-5 pr-5"),children:Object(b.jsxs)(j.a,{backend:m.a,children:[Object(b.jsx)(Vt,{}),Object(b.jsx)(Tt,{})]})})},h=n(112),O=n.n(h),_=n(8),g=n(16),v=n(5),y=n(220),N=n(46),R=n.n(N),C=n(83),k=n(113),q=n(114);function w(e,t,n){if(t){var r=(n=n||{path:"/"}).expires;if("number"==typeof r&&r){var s=new Date;s.setTime(s.getTime()+1e3*r),r=n.expires=s}r&&r instanceof Date&&r.toUTCString&&(n.expires=r.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var a in n){c+="; "+a;var i=n[a];i||(c+="="+i)}document.cookie=c}}function I(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function P(e){w(e,"",{"max-age":"-1"})}var S="token",U="RefreshToken",T="fulfilledForgotRequest",F="wss://norma.nomoreparties.space",E="/orders/all",L="/orders",A=new(function(){function e(t,n){var r=this;Object(k.a)(this,e),this.getIngredientsUrl=void 0,this.checkoutUrl=void 0,this.forgotPasswordUrl=void 0,this.resetPasswordUrl=void 0,this.signUpUrl=void 0,this.signInUrl=void 0,this.signOutUrl=void 0,this.refreshTokenUrl=void 0,this.profileUrl=void 0,this.headers=void 0,this._retriableFetch=function(){var e=Object(C.a)(R.a.mark((function e(t,n){var s,c,a,i,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return s=e.sent,e.next=6,r._processResponse(s);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==(null===e.t0||void 0===e.t0?void 0:e.t0.message)){e.next=27;break}return e.next=14,r.refreshToken();case 14:return i=e.sent,w(U,i.refreshToken),w(S,null===(c=i.accessToken)||void 0===c?void 0:c.split("Bearer ")[1]),n.headers=null!==(a=n.headers)&&void 0!==a?a:{},n.headers.authorization=i.accessToken,e.next=21,fetch(t,n);case 21:return o=e.sent,e.next=24,r._processResponse(o);case 24:return e.abrupt("return",e.sent);case 27:throw e.t0;case 28:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),this.forgotPassword=function(e){return r._postRequest(r.forgotPasswordUrl,e)},this.resetPassword=function(e){return r._postRequest(r.resetPasswordUrl,e)},this.signUp=function(e){return r._postRequest(r.signUpUrl,e)},this.signIn=function(e){return r._postRequest(r.signInUrl,e)},this.signOut=function(){return r._postRequest(r.signOutUrl,{token:I(U)})},this.refreshToken=function(){return r._postRequest(r.refreshTokenUrl,{token:I(U)})},this.getIngredientsUrl=t+n.ingredients,this.checkoutUrl=t+n.checkout,this.forgotPasswordUrl=t+n.forgotPassword,this.resetPasswordUrl=t+n.resetPassword,this.signUpUrl=t+n.signUp,this.signInUrl=t+n.signIn,this.signOutUrl=t+n.signOut,this.refreshTokenUrl=t+n.refreshToken,this.profileUrl=t+n.profile,this.headers={Accept:"application/json","Content-Type":"application/json; charset=utf-8"}}return Object(q.a)(e,[{key:"_processResponse",value:function(){var e=Object(C.a)(R.a.mark((function e(t){var n,r,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}return e.next=3,t.json();case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,t.json();case 6:return r=e.sent,s=null!==(n=r.message)&&void 0!==n?n:"".concat("Error",": ").concat(t.status),e.abrupt("return",Promise.reject(new Error(s)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_postRequest",value:function(e,t){return fetch(e,{method:"POST",headers:this.headers,body:JSON.stringify(t)}).then(this._processResponse)}},{key:"getUserInfo",value:function(){var e=I(S);return this._retriableFetch(this.profileUrl,{headers:Object(v.a)(Object(v.a)({},this.headers),{},{authorization:"Bearer ".concat(e)})})}},{key:"patchUserInfo",value:function(e){var t=I(S);return this._retriableFetch(this.profileUrl,{method:"PATCH",headers:Object(v.a)(Object(v.a)({},this.headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify(e)})}},{key:"getIngredients",value:function(){return fetch(this.getIngredientsUrl,{headers:this.headers}).then(this._processResponse)}},{key:"checkout",value:function(e){var t=I(S);return this._retriableFetch(this.checkoutUrl,{method:"POST",headers:Object(v.a)(Object(v.a)({},this.headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify(e)})}}]),e}())("https://norma.nomoreparties.space/api",{ingredients:"/ingredients",checkout:"/orders",forgotPassword:"/password-reset",resetPassword:"/password-reset/reset",signUp:"/auth/register",signIn:"/auth/login",signOut:"/auth/logout",refreshToken:"/auth/token",profile:"/auth/user"}),B=Object(_.b)("order/checkout",(function(e){return A.checkout(e).then((function(e){return e}))})),D=Object(_.c)({name:"order",initialState:{info:{},isRequestProcessing:!1,isRequestFailed:!1,error:null},reducers:{},extraReducers:function(e){e.addCase(B.pending,(function(e){e.isRequestProcessing=!0,e.isRequestFailed=!1,e.error=null})).addCase(B.fulfilled,(function(e,t){e.info=t.payload.order,e.isRequestProcessing=!1})).addCase(B.rejected,(function(e,t){e.isRequestProcessing=!1,e.isRequestFailed=!0,e.error=t.error}))}}).reducer,V={components:[],activeBun:null},H=Object(_.c)({name:"composition",initialState:V,reducers:{addCompositionItem:function(e,t){e.components.push(Object(v.a)(Object(v.a)({},t.payload),{},{uuid:Object(y.a)()}))},removeCompositionItem:function(e,t){e.components.splice(t.payload.index,1)},selectActiveBun:function(e,t){e.activeBun=t.payload},swapItems:function(e,t){e.components.splice(t.payload.hoverIndex,0,e.components.splice(t.payload.dragIndex,1)[0])}},extraReducers:function(e){e.addCase(B.fulfilled,(function(){return V}))}}),M=H.actions,z=M.addCompositionItem,J=M.removeCompositionItem,Q=M.selectActiveBun,Y=M.swapItems,G=H.reducer,W={all:[],isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1,error:null,types:[{slug:"bun",title:"\u0411\u0443\u043b\u043a\u0438"},{slug:"sauce",title:"\u0421\u043e\u0443\u0441\u044b"},{slug:"main",title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}]},Z=Object(_.b)("ingredients/fetchIngredients",(function(){return A.getIngredients().then((function(e){return e}))}));function K(e,t){var n,r=t.payload;n="bun"===r.type?e.all&&e.all.map((function(e){return e._id===r._id?Object(v.a)(Object(v.a)({},e),{},{count:2}):"bun"===e.type?Object(v.a)(Object(v.a)({},e),{},{count:0}):e})):e.all&&e.all.map((function(e){return e._id===r._id&&e.count?Object(v.a)(Object(v.a)({},e),{},{count:e.count+1}):e._id===r._id?Object(v.a)(Object(v.a)({},e),{},{count:1}):e})),e.all=n}function X(e,t){var n=e.all&&e.all.find((function(e){return e._id===t.payload.ingredient._id}));n&&n.count&&(n.count-=1)}function $(e){e.all&&e.all.forEach((function(e){e.count=0}))}var ee=Object(_.c)({name:"ingredients",initialState:W,reducers:{},extraReducers:function(e){e.addCase(Z.pending,(function(e){e.isRequestProcessing=!0,e.isRequestFailed=!1,e.error=null})).addCase(Z.fulfilled,(function(e,t){e.all=t.payload.data,e.isRequestProcessing=!1})).addCase(Z.rejected,(function(e,t){e.isRequestProcessing=!1,e.isRequestFailed=!0,e.error=t.error.message})).addCase(z,K).addCase(Q,K).addCase(J,X).addCase(B.fulfilled,$)}}).reducer,te={order:!1};function ne(){return Object(v.a)(Object(v.a)({},te),{},{order:!0})}var re=Object(_.c)({name:"modal",initialState:te,reducers:{openOrder:ne,closeModals:function(){return te}},extraReducers:function(e){e.addCase(B.fulfilled,ne)}}),se=re.actions,ce=(se.openOrder,se.closeModals),ae=re.reducer,ie=Object(_.b)("forgotPassword",(function(e){return A.forgotPassword(e).then((function(e){return e}))})),oe=Object(_.c)({name:"forgotPassword",initialState:{isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1,error:null},reducers:{},extraReducers:function(e){e.addCase(ie.pending,(function(e){e.isRequestProcessing=!0,e.isRequestFailed=!1,e.isRequestSucceded=!1,e.error=null})).addCase(ie.fulfilled,(function(e,t){e.isRequestSucceded=t.payload.success,e.error=t.payload.success?null:t.payload.message,e.isRequestProcessing=!1,localStorage.setItem(T,"true")})).addCase(ie.rejected,(function(e,t){e.isRequestProcessing=!1,e.isRequestFailed=!0,e.error=t.error.message}))}}).reducer,le=Object(_.b)("resetPassword",(function(e){return A.resetPassword(e).then((function(e){return e}))})),de=Object(_.c)({name:"resetPassword",initialState:{isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1,error:null},reducers:{},extraReducers:function(e){e.addCase(le.pending,(function(e){e.isRequestSucceded=!1,e.isRequestProcessing=!0,e.isRequestFailed=!1,e.error=null})).addCase(le.fulfilled,(function(e,t){e.isRequestSucceded=t.payload.success,e.error=t.payload.success?null:t.payload.message,e.isRequestProcessing=!1,localStorage.removeItem(T)})).addCase(le.rejected,(function(e,t){e.isRequestProcessing=!1,e.isRequestFailed=!0,e.error=t.error.message}))}}).reducer,ue={isLoggedIn:!!I(S),user:null,profile:{isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1},signUp:{isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1},signIn:{isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1},signOut:{isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1},error:null},je=Object(_.b)("signUp",(function(e){return A.signUp(e).then((function(e){return e}))})),me=Object(_.b)("signIn",(function(e){return A.signIn(e).then((function(e){return e}))})),fe=Object(_.b)("signOut",(function(){return A.signOut().then((function(e){return e}))})),pe=Object(_.b)("getProfile",(function(){return A.getUserInfo().then((function(e){return e}))})),be=Object(_.b)("patchProfile",(function(e){return A.patchUserInfo(e).then((function(e){return e}))})),xe=function(e,t){var n,r=t.payload.accessToken&&t.payload.accessToken.split("Bearer ")[1],s=null===(n=t.payload)||void 0===n?void 0:n.refreshToken;r&&(w(S,r),e.isLoggedIn=!0,e.user=t.payload.user),s&&w(U,s)},he=Object(_.c)({name:"auth",initialState:ue,reducers:{clearError:function(e){e.error=ue.error}},extraReducers:function(e){e.addCase(je.pending,(function(e){e.signUp.isRequestSucceded=!1,e.signUp.isRequestProcessing=!0,e.signUp.isRequestFailed=!1,e.error=null})).addCase(je.fulfilled,(function(e,t){t.payload.success?xe(e,t):e.error=t.payload.message,e.signUp.isRequestProcessing=!1})).addCase(je.rejected,(function(e,t){e.signUp.isRequestProcessing=!1,e.signUp.isRequestFailed=!0,e.error=t.error.message})).addCase(me.pending,(function(e){e.isLoggedIn=!1,e.signIn.isRequestProcessing=!0,e.signIn.isRequestFailed=!1,e.error=null})).addCase(me.fulfilled,(function(e,t){t.payload.success?xe(e,t):e.error=t.payload.message,e.signIn.isRequestProcessing=!1})).addCase(me.rejected,(function(e,t){e.signIn.isRequestProcessing=!1,e.signIn.isRequestFailed=!0,e.error=t.error.message})).addCase(fe.pending,(function(e){e.signOut.isRequestProcessing=!0,e.signOut.isRequestFailed=!1,e.error=null})).addCase(fe.fulfilled,(function(e,t){t.payload.success?function(e){P(S),P(U),e.isLoggedIn=!1,e.user=null}(e):e.error=t.payload.message,e.signOut.isRequestProcessing=!1})).addCase(fe.rejected,(function(e,t){e.signOut.isRequestProcessing=!1,e.signOut.isRequestFailed=!0,e.error=t.error.message})).addCase(pe.pending,(function(e){e.profile.isRequestProcessing=!0,e.profile.isRequestFailed=!1,e.error=null})).addCase(pe.fulfilled,(function(e,t){t.payload.success?e.user=t.payload.user:e.error=t.payload.message,e.profile.isRequestProcessing=!1})).addCase(pe.rejected,(function(e,t){e.profile.isRequestProcessing=!1,e.profile.isRequestFailed=!0,e.error=t.error.message})).addCase(be.pending,(function(e){e.profile.isRequestProcessing=!0,e.profile.isRequestFailed=!1,e.error=null})).addCase(be.fulfilled,(function(e,t){t.payload.success?e.user=t.payload.user:e.error=t.payload.message,e.profile.isRequestProcessing=!1})).addCase(be.rejected,(function(e,t){e.profile.isRequestProcessing=!1,e.profile.isRequestFailed=!0,e.error=t.error.message}))}}),Oe=Object(_.c)({name:"ws",initialState:{wsConnected:!1,wsError:!1},reducers:{wsConnectionStart:function(e,t){},wsConnectionStop:function(e){e.wsConnected=!1,e.wsError=!1},wsConnectionSuccess:function(e){e.wsConnected=!0,e.wsError=!1},wsConnectionError:function(e){e.wsConnected=!1,e.wsError=!0},wsConnectionClosed:function(e){e.wsConnected=!1,e.wsError=!1}}}),_e=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();e(Oe.actions.wsConnectionStart({url:"".concat(F).concat(E)})),e(ve.actions.request())}},ge=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();e(Oe.actions.wsConnectionStop())}},ve=Object(_.c)({name:"feed",initialState:{all:[],isRequestProcessing:!1,isRequestFailed:!1,isRequestSucceded:!1,error:null,total:0,totalToday:0},reducers:{request:function(e){e.isRequestProcessing=!0,e.isRequestFailed=!1,e.isRequestSucceded=!1},failed:function(e){e.isRequestFailed=!0,e.isRequestProcessing=!1,e.isRequestSucceded=!1},success:function(e){e.isRequestSucceded=!0,e.isRequestProcessing=!1,e.isRequestFailed=!1},setData:function(e,t){e.all=t.payload.orders,e.total=t.payload.total,e.totalToday=t.payload.totalToday}}}),ye=ve,Ne=Object(g.b)({ingredients:ee,isModalOpen:ae,composition:G,order:D,forgotPassword:oe,resetPassword:de,auth:he.reducer,ws:Oe.reducer,feed:ye.reducer}),Re=n(115),Ce=["success"],ke=Oe.actions,qe=ke.wsConnectionStart,we=ke.wsConnectionStop,Ie=ke.wsConnectionSuccess,Pe=ke.wsConnectionError,Se=ke.wsConnectionClosed,Ue=Object(_.a)({reducer:Ne,middleware:function(e){return e().concat((function(e){var t=null;return function(n){return function(r){var s=e.dispatch,c=r.type,a=r.payload;if(c===qe.type){var i=a.token?"".concat(a.url,"?token=").concat(a.token):"".concat(a.url);t=new WebSocket(i)}c===we.type&&t&&t.close(1e3,"CLOSE_NORMAL"),t&&(t.onopen=function(){s(Ie())},t.onerror=function(){s(Pe())},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=n.success,c=Object(Re.a)(n,Ce);r&&(s(ye.actions.success()),s(ye.actions.setData(c)))},t.onclose=function(e){s(Se())}),n(r)}}}))},devTools:!1}),Te=function(){return Object(i.b)()},Fe=i.c,Ee=function(){var e=Te();return Object(r.useEffect)((function(){return e(_e()),function(){e(ge())}}),[e]),Object(b.jsxs)("main",{className:"".concat(O.a.main," pl-5 pr-5"),children:[Object(b.jsx)(fn,{}),Object(b.jsx)(xn,{})]})},Le=n(59),Ae=n(26),Be=n.n(Ae),De=n(4),Ve=n(61),He=n.n(Ve),Me=s.a.memo((function(e){var t=e.data,n=e.count;return Object(b.jsxs)("div",{className:He.a.root,children:[Object(b.jsx)("img",{src:t.image_mobile,alt:t.name,className:He.a.image}),n&&Object(b.jsx)("div",{className:"".concat(He.a.cover," "),children:Object(b.jsxs)("p",{className:"text text_type_main-default  text_color_primary",children:["+",n]})})]})})),ze=n(216),Je=n(219),Qe=function(e){if(e)return Object(ze.a)(new Date(e),new Date,{locale:Je.a}).split(" \u0432 ").join(", ")+" i-GMT+3"},Ye=function(e){switch(e){case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"pending":return"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435";case"created":return"\u0421\u043e\u0437\u0434\u0430\u043d"}},Ge=s.a.memo((function(e){var t=e.data,n=Object(u.g)().pathname.includes("/profile/orders"),r="done"===(null===t||void 0===t?void 0:t.status)?Be.a.statusDone:"text_color_primary",s=Fe((function(e){return{allIngredients:e.ingredients.all}})).allIngredients,c=[];t.ingredients.forEach((function(e){return c.push(null===s||void 0===s?void 0:s.find((function(t){return t._id===e})))}));var a=c.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.price)}),0),i=[];c.forEach((function(e){!i.find((function(t){return t._id===(null===e||void 0===e?void 0:e._id)}))&&e&&i.push(e)}));var o=i.slice(0,6).reverse();return Object(b.jsxs)("article",{className:"".concat(Be.a.root," pt-6 pb-6 pl-6 pr-6"),children:[Object(b.jsxs)("div",{className:Be.a.container,children:[Object(b.jsxs)("p",{className:"text text_type_digits-default text_color_primary",children:["#0",t.number]}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Qe(t.createdAt)})]}),Object(b.jsx)("h2",{className:"".concat(Be.a.name," text text_type_main-medium mt-6 text_color_primary"),children:t.name}),n&&Object(b.jsx)("p",{className:"text text_type_main-default mt-2 ".concat(r),children:Ye(t.status)}),Object(b.jsxs)("div",{className:"".concat(Be.a.container," mt-6"),children:[Object(b.jsx)("ul",{className:Be.a.list,children:o.map((function(e,t){return e&&Object(b.jsx)("li",{className:Be.a.item,children:Object(b.jsx)(Me,{data:e,count:0===t&&i.length-6>0&&i.length-6},e._id)},t)}))}),Object(b.jsxs)("p",{className:Be.a.price,children:[Object(b.jsx)("span",{className:"text text_type_digits-default text_color_primary mr-2",children:a.toString()}),Object(b.jsx)(De.CurrencyIcon,{type:"primary"})]})]})]})})),We=n(47),Ze=n.n(We),Ke=s.a.memo((function(){var e=Object(u.g)(),t=Te(),n=Fe((function(e){return{orders:e.feed.all}})).orders,s=Object(r.useState)([]),c=Object(l.a)(s,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){return t((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();e(Oe.actions.wsConnectionStart({url:"".concat(F).concat(L),token:I(S)})),e(ve.actions.request())})),function(){t(ge())}}),[t]),Object(r.useEffect)((function(){n.length>0&&i(Object(Le.a)(n).reverse())}),[n]),Object(b.jsx)("section",{className:Ze.a.section,children:Object(b.jsx)("ul",{className:Ze.a.scrollArea,children:a.map((function(t){return Object(b.jsx)("li",{className:Ze.a.item,children:Object(b.jsx)(o.b,{to:"/profile/orders/".concat(t._id),state:{backgroundLocation:e},className:Ze.a.link,children:Object(b.jsx)(Ge,{data:t})})},t._id)}))})})})),Xe=n(42);function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(l.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)({}),i=Object(l.a)(a,2),o=i[0],d=i[1],u=Object(r.useState)(!1),j=Object(l.a)(u,2),m=j[0],f=j[1],p=function(e){var t=e.target,n=t.name,r=t.value,a=t.validationMessage;c(Object(v.a)(Object(v.a)({},s),{},Object(Xe.a)({},n,r))),d(Object(v.a)(Object(v.a)({},o),{},Object(Xe.a)({},n,a))),f(t.closest("form").checkValidity())},b=Object(r.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(v.a)({},e),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c(t),d({}),f(n)}),[c,d,f,e]);return{values:s,handleChange:p,resetForm:b,errors:o,isValid:m}}var et,tt=function(){var e=Te(),t=Object(u.g)(),n=he.actions.clearError,s=Fe((function(e){return e.auth})),c=s.isLoggedIn,a=s.error,i=$e({email:"",password:""}),o=i.values,l=i.handleChange,d=i.errors,j=i.isValid;return Object(r.useEffect)((function(){e(n())}),[e,n]),c?Object(b.jsx)(u.a,{to:"/",state:{from:t}}):Object(b.jsxs)($t,{header:"\u0412\u0445\u043e\u0434",buttonText:"\u0412\u043e\u0439\u0442\u0438",formInfo:[{text:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",linkTitle:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",linkUrl:"/register"},{text:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",linkTitle:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",linkUrl:"/forgot-password"}],onSubmit:function(t){t.preventDefault(),e(me(o))},isValid:j,error:a,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{type:"email",placeholder:"E-mail",value:o.email,name:"email",error:!!d.email,errorText:d.email,onChange:l})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.PasswordInput,{value:o.password,name:"password",onChange:l})})]})},nt=function(){var e=Te(),t=Object(u.g)(),n=he.actions.clearError,s=Fe((function(e){return e.auth})),c=s.isLoggedIn,a=s.error,i=$e({name:"",email:"",password:""}),o=i.values,l=i.handleChange,d=i.errors,j=i.isValid;return Object(r.useEffect)((function(){e(n())}),[e,n]),c?Object(b.jsx)(u.a,{to:"/",state:{from:t}}):Object(b.jsxs)($t,{header:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",formInfo:[{text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",linkTitle:"\u0412\u043e\u0439\u0442\u0438",linkUrl:"/login"}],onSubmit:function(t){t.preventDefault(),e(je(o))},isValid:j,error:a,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:o.name,name:"name",error:!!d.name,errorText:d.name,onChange:l})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{type:"email",placeholder:"E-mail",value:o.email,name:"email",error:!!d.email,errorText:d.email,onChange:l})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.PasswordInput,{value:o.password,name:"password",onChange:l})})]})},rt=function(){var e=Te(),t=Object(u.g)(),n=Fe((function(e){return e.forgotPassword})),r=n.isRequestSucceded,s=n.error,c=Fe((function(e){return e.auth})).isLoggedIn,a=$e({email:""}),i=a.values,o=a.handleChange,l=a.errors,d=a.isValid;return c?Object(b.jsx)(u.a,{to:"/login",state:{from:t}}):r?Object(b.jsx)(u.a,{to:"/reset-password",state:{from:t}}):Object(b.jsx)($t,{header:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",formInfo:[{text:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",linkTitle:"\u0412\u043e\u0439\u0442\u0438",linkUrl:"/login"}],onSubmit:function(t){t.preventDefault(),e(ie({email:i.email}))},isValid:d,error:s,children:Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:i.email,name:"email",error:!!l.email,errorText:l.email,onChange:o})})})},st=function(){var e=Te(),t=Object(u.g)(),n=Fe((function(e){return e.resetPassword})),r=n.isRequestSucceded,s=n.error,c=n.responseError,a=Fe((function(e){return e.auth})).isLoggedIn,i=$e({password:"",token:""}),o=i.values,l=i.handleChange,d=i.errors,j=i.isValid;return localStorage.getItem(T)?a||r?Object(b.jsx)(u.a,{to:"/login",state:{from:t}}):Object(b.jsxs)($t,{header:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",formInfo:[{text:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",linkTitle:"\u0412\u043e\u0439\u0442\u0438",linkUrl:"/login"}],onSubmit:function(t){t.preventDefault(),e(le(Object(v.a)({},o)))},isValid:j,error:null!==c&&void 0!==c?c:s,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.PasswordInput,{value:o.password,name:"password",onChange:l})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:o.token,name:"token",error:!!d.token,errorText:d.token,onChange:l})})]}):Object(b.jsx)(u.a,{to:"/forgot-password",state:{from:t}})},ct=n(84),at=n.n(ct),it=function(){var e=Te(),t=Fe((function(e){return e.auth})).user,n=$e({name:"",email:"",password:""}),s=n.values,c=n.handleChange,a=n.errors,i=n.resetForm,o=Object(r.useState)(!1),d=Object(l.a)(o,2),u=d[0],j=d[1],m=Object(r.useState)(!1),f=Object(l.a)(m,2),p=f[0],x=f[1],h=Object(r.useState)(!1),O=Object(l.a)(h,2),_=O[0],g=O[1];function y(){j(!1),x(!1),g(!1)}return Object(r.useEffect)((function(){t?i(Object(v.a)(Object(v.a)({},t),{},{password:""})):e(pe())}),[t,e]),Object(b.jsxs)("form",{className:at.a.form,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{placeholder:"\u0418\u043c\u044f",icon:"EditIcon",value:s.name,name:"name",error:!!a.name,errorText:a.name,onChange:c,onIconClick:function(){return j(!u)},disabled:!u})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:"EditIcon",value:s.email,name:"email",error:!!a.email,errorText:a.email,onChange:c,onIconClick:function(){return x(!p)},disabled:!p})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(De.Input,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon",value:s.password,name:"password",error:!!a.password,errorText:a.password,onChange:c,onIconClick:function(){return g(!_)},disabled:!_})}),(u||p||_)&&Object(b.jsxs)("div",{className:at.a.buttons,children:[Object(b.jsx)(De.Button,{onClick:function(t){t.preventDefault(),e(be(s)),y()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)(De.Button,{onClick:function(e){e.preventDefault(),y()},type:"secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},ot=n(85),lt=n.n(ot),dt=function(){return Object(b.jsx)("main",{className:lt.a.main,children:Object(b.jsx)("h1",{className:lt.a.heading,children:"Page not found"})})},ut=n(80),jt=n(117),mt=n.n(jt),ft=n(116),pt=n.n(ft),bt=function(e){var t=e.children,n=e.closeHandler,r=Te();return Object(b.jsx)("section",{className:pt.a.root,onClick:function(e){e.target===e.currentTarget&&(n?n():r(ce()))},children:t})},xt=Object(ut.css)(et||(et=Object(d.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: '#0cc';\n  z-index: 100;\n"]))),ht=function(){var e,t=Object(u.g)(),n=Te(),s=null===(e=t.state)||void 0===e?void 0:e.backgroundLocation,c=Object(u.i)(),a=Fe((function(e){return{isIngredientsLoading:e.ingredients.isRequestProcessing,isOrderLoading:e.order.isRequestProcessing,isFeedLoading:e.feed.isRequestProcessing}})),i=a.isIngredientsLoading,o=a.isOrderLoading,d=a.isFeedLoading,j=Object(r.useState)(!1),m=Object(l.a)(j,2),f=m[0],p=m[1],h=Object(r.useCallback)((function(){c(-1)}),[c]);return Object(r.useEffect)((function(){n(Z())}),[n]),Object(r.useEffect)((function(){p(i||o||d)}),[i,o,d]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u.e,{location:s||t,children:Object(b.jsxs)(u.c,{path:"/",element:Object(b.jsx)(on,{}),children:[Object(b.jsx)(u.c,{index:!0,element:Object(b.jsx)(x,{})}),Object(b.jsxs)(u.c,{path:"feed",children:[Object(b.jsx)(u.c,{index:!0,element:Object(b.jsx)(Ee,{})}),Object(b.jsx)(u.c,{path:":id",element:Object(b.jsx)(Yt,{})})]}),Object(b.jsx)(u.c,{path:"login",element:Object(b.jsx)(tt,{})}),Object(b.jsx)(u.c,{path:"register",element:Object(b.jsx)(nt,{})}),Object(b.jsx)(u.c,{path:"forgot-password",element:Object(b.jsx)(rt,{})}),Object(b.jsx)(u.c,{path:"reset-password",element:Object(b.jsx)(st,{})}),Object(b.jsxs)(u.c,{path:"profile",element:Object(b.jsx)(rn,{children:Object(b.jsx)(un,{})}),children:[Object(b.jsx)(u.c,{index:!0,element:Object(b.jsx)(it,{})}),Object(b.jsx)(u.c,{path:"orders",element:Object(b.jsx)(Ke,{})})]}),Object(b.jsx)(u.c,{path:"/profile/orders/:id",element:Object(b.jsx)(Yt,{})}),Object(b.jsx)(u.c,{path:"/ingredients/:id",element:Object(b.jsx)(zt,{})}),Object(b.jsx)(u.c,{path:"*",element:Object(b.jsx)(dt,{})})]})}),s&&Object(b.jsxs)(u.e,{children:[Object(b.jsx)(u.c,{path:"/ingredients/:id",element:Object(b.jsx)(vt,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",closeHandler:h,children:Object(b.jsx)(zt,{})})}),Object(b.jsx)(u.c,{path:"/feed/:id",element:Object(b.jsx)(vt,{closeHandler:h,children:Object(b.jsx)(Yt,{})})}),Object(b.jsx)(u.c,{path:"/profile/orders/:id",element:Object(b.jsx)(vt,{closeHandler:h,children:Object(b.jsx)(Yt,{})})})]}),f&&Object(b.jsx)(bt,{children:Object(b.jsx)(mt.a,{color:"#0cc",loading:f,css:xt,size:150})})]})},Ot=n(62),_t=n.n(Ot),gt=document.getElementById("react-modals"),vt=function(e){var t=e.children,n=e.header,s=e.closeHandler,c=Te(),i=Object(r.useCallback)((function(){c(ce())}),[c]),o=null!==s&&void 0!==s?s:i;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&o()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[o]),a.a.createPortal(Object(b.jsx)(bt,{closeHandler:s,children:Object(b.jsxs)("div",{className:"".concat(_t.a.root," pt-10 pr-10 pb-10 pl-10"),children:[n&&Object(b.jsx)("h2",{className:"text text_type_main-large ".concat(_t.a.header),children:n}),Object(b.jsx)("span",{className:_t.a.close,children:Object(b.jsx)(De.CloseIcon,{type:"primary",onClick:o})}),t]})}),gt)},yt=n(86),Nt=n.n(yt),Rt=n.p+"static/media/done.e036971b.png",Ct=function(){var e=Fe((function(e){var t;return null===(t=e.order.info)||void 0===t?void 0:t.number}));return Object(b.jsxs)("article",{className:"".concat(Nt.a.root),children:[Object(b.jsx)("p",{className:"".concat(Nt.a.order," text text_type_digits-large mt-20 mb-8"),children:e}),Object(b.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("img",{src:Rt,alt:"\u0418\u043a\u043e\u043d\u043a\u0430 '\u0413\u043e\u0442\u043e\u0432\u043e'",className:"mb-15"}),Object(b.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-20",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},kt=n(217),qt=n(218),wt=n(118),It=n.n(wt),Pt=s.a.memo((function(e){var t=e.item,n=e.index,s=t.id,c=Te(),a=Object(r.useRef)(null),i=Object(r.useCallback)((function(e,t){c(Y({dragIndex:e,hoverIndex:t}))}),[c]),o=Object(kt.a)({accept:"element",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(a.current){var s=e.index,c=n;if(s!==c){var o=null===(r=a.current)||void 0===r?void 0:r.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=t.getClientOffset().y-o.top;s<c&&d<l||(i(s,c),e.index=c)}}}}),d=Object(l.a)(o,2),u=d[0].handlerId,j=d[1],m=Object(qt.a)({type:"element",item:function(){return{id:s,index:n}}});return(0,Object(l.a)(m,2)[1])(j(a)),Object(b.jsxs)("li",{className:"".concat(It.a.element," mb-4"),ref:a,"data-handler-id":u,children:[Object(b.jsx)(De.DragIcon,{type:"primary"}),Object(b.jsx)(De.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return function(e,t){c(J({index:t,ingredient:e}))}(t,n)}})]})})),St=n(48),Ut=n.n(St),Tt=s.a.memo((function(){var e=Object(kt.a)({accept:"ingredient",drop:function(e){!function(e){var t=o&&o.find((function(t){return t._id===e}));"bun"!==(null===t||void 0===t?void 0:t.type)?a(z(t)):a(Q(t))}(e._id)},collect:function(e){return{isHover:e.isOver()}}}),t=Object(l.a)(e,2),n=t[0].isHover,s=t[1],c=n?"2px dashed lightgreen":"none",a=Te(),i=Object(u.i)(),o=Fe((function(e){return{ingredients:e.ingredients.all}})).ingredients,d=Fe((function(e){return e.composition})),j=d.components,m=d.activeBun,f=Fe((function(e){return e.auth})).isLoggedIn,p=Fe((function(e){return e.isModalOpen.order})),x=Object(r.useMemo)((function(){return j.reduce((function(e,t){return e+t.price}),m?2*m.price:0)}),[j,m]);var h=Object(b.jsx)(vt,{children:Object(b.jsx)(Ct,{})});return Object(b.jsxs)("section",{className:Ut.a.section,children:[Object(b.jsxs)("div",{className:"mt-25 mb-10 ml-4",ref:s,style:{outline:c},children:[Object(b.jsx)("span",{className:"pl-8",children:m?Object(b.jsx)(De.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(m.name," (\u0432\u0435\u0440\u0445)"),price:m.price,thumbnail:m.image}):Object(b.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})}),Object(b.jsx)("ul",{className:"".concat(Ut.a.scrollArea," mt-4 mb-4"),children:j.map((function(e,t){return Object(b.jsx)(Pt,{item:e,index:t},e.uuid)}))}),Object(b.jsx)("span",{className:"pl-8",children:m?Object(b.jsx)(De.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(m.name," (\u043d\u0438\u0437)"),price:m.price,thumbnail:m.image}):Object(b.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})})]}),Object(b.jsxs)("div",{className:"".concat(Ut.a.total," mr-5"),children:[!!m&&j.length>0&&Object(b.jsx)(De.Button,{type:"primary",size:"large",onClick:function(){if(!f)return i("/login");var e=[m].concat(Object(Le.a)(j),[m]).map((function(e){return null===e||void 0===e?void 0:e._id}));a(B({ingredients:e}))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(b.jsxs)("p",{className:"".concat(Ut.a.price," mr-10"),children:[Object(b.jsxs)("span",{className:"text text_type_digits-medium",children:[x,"\xa0"]}),Object(b.jsx)(De.CurrencyIcon,{type:"primary"})]})]}),p&&h]})})),Ft=n(37),Et=n.n(Ft),Lt=s.a.memo((function(e){var t=e.data,n=Object(u.g)(),r=t._id,s=Object(qt.a)({type:"ingredient",item:{_id:r}}),c=Object(l.a)(s,2)[1];return Object(b.jsx)(o.b,{to:"/ingredients/".concat(r),state:{backgroundLocation:n},className:Et.a.link,ref:c,children:Object(b.jsxs)("figure",{className:Et.a.figure,children:[Object(b.jsx)("img",{src:t.image,alt:t.name,className:Et.a.picture}),!!t.count&&Object(b.jsx)(De.Counter,{count:t.count,size:"default"}),Object(b.jsxs)("p",{className:"".concat(Et.a.price," mt-2 mb-2"),children:[Object(b.jsxs)("span",{className:"text text_type_digits-default text_color_primary",children:[t.price,"\xa0"]}),Object(b.jsx)(De.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("figcaption",{className:"text text_type_main-default text_color_primary ".concat(Et.a.caption),children:t.name})]})})})),At=n(38),Bt=n.n(At),Dt=n(56),Vt=s.a.memo((function(){var e=Fe((function(e){return{ingredients:e.ingredients.all,types:e.ingredients.types}})),t=e.ingredients,n=e.types,s=Object(r.useRef)(null),c=Object(r.useRef)(null),a=Object(r.useRef)(null),i=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)("bun"),s=Object(l.a)(n,2),c=s[0],a=s[1],i=Object(r.useCallback)((function(){var n,r,s=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect().top,i="",o=Number.MAX_VALUE,l=Object(Dt.a)(e);try{for(l.s();!(r=l.n()).done;){var d,u,j=r.value,m=Math.abs((null===(d=j.current)||void 0===d?void 0:d.getBoundingClientRect().top)-s);m>=0&&o>m&&(o=m,i=null===(u=j.current)||void 0===u?void 0:u.id)}}catch(f){l.e(f)}finally{l.f()}i&&i!==c&&a(i)}),[e,c]);return{listRef:t,onScroll:i,topType:c}}([s,c,a]),o=i.listRef,d=i.onScroll,u=i.topType;return Object(b.jsxs)("section",{className:Bt.a.section,children:[Object(b.jsx)("h2",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsx)("div",{className:Bt.a.tabs,children:n.map((function(e){var t="bun"===e.slug?s:"sauce"===e.slug?c:a;return Object(b.jsx)(De.Tab,{value:e.slug,active:e.slug===u,onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},children:e.title},e.slug)}))}),Object(b.jsx)("div",{className:Bt.a.scrollArea,ref:o,onScroll:d,children:n.map((function(e,n){var r="bun"===e.slug?s:"sauce"===e.slug?c:a;return Object(b.jsxs)("article",{className:"mt-10 ".concat(Bt.a.ingredients),ref:r,id:e.slug,children:[Object(b.jsx)("h2",{className:"text text_type_main-medium mb-6",children:e.title}),Object(b.jsx)("ul",{className:"".concat(Bt.a.cards," pl-4"),children:null===t||void 0===t?void 0:t.filter((function(t){return t.type===e.slug})).map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(Lt,{data:e})},e._id)}))})]},n)}))})]})})),Ht=n(27),Mt=n.n(Ht),zt=function(){var e,t=Object(u.j)().id,n=Te(),s=Fe((function(e){return e.ingredients.all})),c=Object(r.useState)(null),a=Object(l.a)(c,2),i=a[0],o=a[1],d=null===(e=Object(u.g)().state)||void 0===e?void 0:e.backgroundLocation;return Object(r.useEffect)((function(){var e=null===s||void 0===s?void 0:s.find((function(e){return e._id===t}));!i&&e&&o(e)}),[s,i,t,n]),Object(b.jsxs)("figure",{className:Mt.a.root,children:[!d&&Object(b.jsx)("h2",{className:"text text_type_main-large ".concat(Mt.a.header),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),i&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:i.image_large,alt:i.name,className:Mt.a.picture}),Object(b.jsx)("figcaption",{className:"text text_type_main-medium mt-4 mb-8",children:i.name}),Object(b.jsxs)("div",{className:"".concat(Mt.a.nutrients," text_color_inactive mb-5"),children:[Object(b.jsxs)("p",{className:"".concat(Mt.a.info," mr-5"),children:[Object(b.jsx)("span",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(b.jsx)("span",{className:"text text_type_digits-default",children:i.calories})]}),Object(b.jsxs)("p",{className:"".concat(Mt.a.info," mr-5"),children:[Object(b.jsx)("span",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("span",{className:"text text_type_digits-default",children:i.proteins})]}),Object(b.jsxs)("p",{className:"".concat(Mt.a.info," mr-5"),children:[Object(b.jsx)("span",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("span",{className:"text text_type_digits-default",children:i.fat})]}),Object(b.jsxs)("p",{className:Mt.a.info,children:[Object(b.jsx)("span",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("span",{className:"text text_type_digits-default",children:i.carbohydrates})]})]})]})]})},Jt=n(28),Qt=n.n(Jt),Yt=function(){var e=Te(),t=Object(u.j)().id,n=Fe((function(e){return{orders:e.feed.all,allIngredients:e.ingredients.all}})),s=n.orders,c=n.allIngredients,a=Object(r.useState)(null),i=Object(l.a)(a,2),o=i[0],d=i[1],j=Object(r.useState)(null),m=Object(l.a)(j,2),f=m[0],p=m[1],x=Object(r.useState)(0),h=Object(l.a)(x,2),O=h[0],_=h[1];return Object(r.useEffect)((function(){if(0===s.length)return e(_e()),function(){e(ge())}}),[e,s]),Object(r.useEffect)((function(){var e=null===s||void 0===s?void 0:s.find((function(e){return e._id===t}));if(!o&&e){d(e);var n=[];e.ingredients.forEach((function(e){var t=null===c||void 0===c?void 0:c.find((function(t){return t._id===e}));t&&n.push(Object(v.a)(Object(v.a)({},t),{},{count:1}))}));var r=n.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.price)}),0);_(r);var a=[];n.forEach((function(e){var t=a.find((function(t){return t._id===e._id}));t?t.count&&(t.count+=1):a.push(e)})),p(a)}}),[s,o,t,c]),Object(b.jsx)("main",{className:"".concat(Qt.a.main," pl-5 pr-5"),children:Object(b.jsxs)("article",{className:Qt.a.root,children:[Object(b.jsxs)("p",{className:"text text_type_digits-default",children:["#0",null===o||void 0===o?void 0:o.number]}),Object(b.jsx)("h2",{className:"".concat(Qt.a.name," text text_type_main-medium mt-10 mb-3"),children:null===o||void 0===o?void 0:o.name}),Object(b.jsx)("p",{className:"".concat(Qt.a.status," text text_type_main-default"),children:Ye(null===o||void 0===o?void 0:o.status)}),Object(b.jsx)("p",{className:"".concat(Qt.a.name," text text_type_main-medium mt-15 mb-6"),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("ul",{className:Qt.a.scrollArea,children:null===f||void 0===f?void 0:f.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)(Zt,{data:e},e._id)},t)}))}),Object(b.jsxs)("div",{className:"".concat(Qt.a.bottom," mt-10"),children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Qe(null===o||void 0===o?void 0:o.createdAt)}),Object(b.jsxs)("p",{className:Qt.a.price,children:[Object(b.jsx)("span",{className:"text text_type_digits-default text_color_primary mr-2",children:O}),Object(b.jsx)(De.CurrencyIcon,{type:"primary"})]})]})]})})},Gt=n(63),Wt=n.n(Gt),Zt=s.a.memo((function(e){var t=e.data;return Object(b.jsxs)("div",{className:"".concat(Wt.a.root," mb-4"),children:[Object(b.jsx)(Me,{data:t}),Object(b.jsx)("h3",{className:"".concat(Wt.a.title," text text_type_main-default ml-4"),children:t.name}),Object(b.jsxs)("p",{className:Wt.a.price,children:[Object(b.jsxs)("span",{className:"text text_type_digits-default text_color_primary mr-2",children:[t.count," x ",t.price]}),Object(b.jsx)(De.CurrencyIcon,{type:"primary"})]})]})})),Kt=n(49),Xt=n.n(Kt),$t=function(e){var t=e.header,n=e.children,r=e.buttonText,s=e.formInfo,c=e.onSubmit,a=e.isValid,i=e.error;return Object(b.jsxs)("main",{className:"".concat(Xt.a.main),children:[Object(b.jsx)("h1",{className:"".concat(Xt.a.heading," text text_type_main-medium pb-6"),children:t}),Object(b.jsxs)("form",{className:"".concat(Xt.a.form," mb-20"),onSubmit:c,children:[!!i&&Object(b.jsx)("p",{children:i}),n,Object(b.jsx)(De.Button,{disabled:!a,children:r})]}),s&&s.map((function(e,t){return Object(b.jsxs)("p",{className:"".concat(Xt.a.info," text text_type_main-default text_color_inactive mb-4"),children:[e.text," ",Object(b.jsx)(o.b,{to:e.linkUrl,className:"link",children:e.linkTitle})]},t)}))]})},en=n(32),tn=n.n(en),nn=function(){var e=Object(u.h)("/profile"),t=Object(u.h)("/profile/orders"),n=Object(u.i)(),r="".concat(tn.a.link," text text_type_main-medium text_color_inactive"),s=Te();return Object(b.jsxs)("nav",{children:[Object(b.jsxs)("ul",{className:tn.a.list,children:[Object(b.jsx)("li",{children:Object(b.jsx)(o.c,{to:"/profile",className:"".concat(r," ").concat(e&&tn.a.active),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(b.jsx)("li",{children:Object(b.jsx)(o.c,{to:"/profile/orders",className:"".concat(r," ").concat(t&&tn.a.active),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"})}),Object(b.jsx)("li",{children:Object(b.jsx)(o.c,{to:"/",onClick:function(e){return e.preventDefault(),s(fe()),n("/login")},className:function(e){var t=e.isActive;return"".concat(tn.a.link," text text_type_main-medium text_color_inactive ").concat(t&&tn.a.active)},children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(b.jsx)("p",{className:"text text_type_main-small text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},rn=function(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/login":n;return Fe((function(e){return e.auth})).isLoggedIn?t:Object(b.jsx)(u.a,{to:r})},sn=n(12),cn=n.n(sn),an=function(){var e=Object(u.h)("/"),t=Object(u.h)("/feed"),n=Object(u.h)("/profile/*");return Object(b.jsx)("header",{className:cn.a.header,children:Object(b.jsxs)("nav",{className:cn.a.nav,children:[Object(b.jsxs)("ul",{className:cn.a.menu,children:[Object(b.jsx)("li",{className:"".concat(cn.a.item," pl-5 pr-5 mr-2"),children:Object(b.jsxs)(o.c,{to:"/",className:function(e){var t=e.isActive;return"".concat(cn.a.link," text text_type_main-default text_color_inactive ").concat(t&&cn.a.active)},children:[Object(b.jsx)("span",{className:"mr-2",children:Object(b.jsx)(De.BurgerIcon,{type:e?"primary":"secondary"})}),Object(b.jsx)("span",{className:cn.a.text,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(b.jsx)("li",{className:"".concat(cn.a.item," pl-5 pr-5 mr-2"),children:Object(b.jsxs)(o.c,{to:"/feed",className:function(e){var t=e.isActive;return"".concat(cn.a.link," text text_type_main-default text_color_inactive ").concat(t&&cn.a.active)},children:[Object(b.jsx)("span",{className:"mr-2",children:Object(b.jsx)(De.ListIcon,{type:t?"primary":"secondary"})}),Object(b.jsx)("span",{className:cn.a.text,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]}),Object(b.jsx)(o.b,{className:cn.a.logo,to:"/",children:Object(b.jsx)(De.Logo,{})}),Object(b.jsx)("ul",{className:"".concat(cn.a.menu," ").concat(cn.a.menu_right),children:Object(b.jsx)("li",{className:"".concat(cn.a.item," pl-5 pr-5 mr-2"),children:Object(b.jsxs)(o.c,{to:"/profile",className:function(e){var t=e.isActive;return"".concat(cn.a.link," text text_type_main-default text_color_inactive ").concat(t&&cn.a.active)},children:[Object(b.jsx)("span",{className:"mr-2",children:Object(b.jsx)(De.ProfileIcon,{type:n?"primary":"secondary"})}),Object(b.jsx)("span",{className:cn.a.text,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})})]})})},on=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(an,{}),Object(b.jsx)(u.b,{})]})},ln=n(87),dn=n.n(ln),un=function(){return Object(b.jsxs)("main",{className:dn.a.main,children:[Object(b.jsx)("aside",{className:dn.a.sidebar,children:Object(b.jsx)(nn,{})}),Object(b.jsx)(u.b,{})]})},jn=n(50),mn=n.n(jn),fn=s.a.memo((function(){var e=Object(u.g)(),t=Fe((function(e){return{orders:e.feed.all}})).orders;return Object(b.jsxs)("section",{className:mn.a.section,children:[Object(b.jsx)("h2",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsx)("ul",{className:mn.a.scrollArea,children:t.map((function(t){return Object(b.jsx)("li",{className:mn.a.item,children:Object(b.jsx)(o.b,{to:"/feed/".concat(t._id),state:{backgroundLocation:e},className:mn.a.link,children:Object(b.jsx)(Ge,{data:t})})},t._id)}))})]})})),pn=n(23),bn=n.n(pn),xn=s.a.memo((function(){var e=Fe((function(e){return{orders:e.feed.all,total:e.feed.total,totalToday:e.feed.totalToday}})),t=e.orders,n=e.total,r=e.totalToday;return Object(b.jsxs)("section",{className:bn.a.section,children:[Object(b.jsxs)("article",{className:bn.a.topContainer,children:[Object(b.jsxs)("div",{className:bn.a.column,children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(b.jsx)("ul",{className:"".concat(bn.a.list," mt-6"),children:t.filter((function(e){return"done"===e.status})).map((function(e){return Object(b.jsx)("li",{className:"".concat(bn.a.orderDone," text text_type_digits-default mb-2"),children:e.number},e._id)}))})]}),Object(b.jsxs)("div",{className:bn.a.column,children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("ul",{className:"".concat(bn.a.list," mt-6"),children:t.filter((function(e){return"pending"===e.status})).map((function(e){return Object(b.jsx)("li",{className:"".concat(bn.a.orderPending," text text_type_digits-default mb-2"),children:e.number},e._id)}))})]})]}),Object(b.jsxs)("article",{className:"mt-9",children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("p",{className:"".concat(bn.a.order," text text_type_digits-large"),children:n})]}),Object(b.jsxs)("article",{className:"mt-15",children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("p",{className:"".concat(bn.a.order," text text_type_digits-large"),children:r})]})]})}));a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(i.a,{store:Ue,children:Object(b.jsx)(ht,{})})})}),document.getElementById("root"))},23:function(e,t,n){e.exports={section:"feed-summary_section__Aw6V0",topContainer:"feed-summary_topContainer__10-Id",column:"feed-summary_column__38C6W",list:"feed-summary_list__1FoJT",orderDone:"feed-summary_orderDone__2qskG",orderPending:"feed-summary_orderPending__1SBAp",order:"feed-summary_order__2RLUn"}},26:function(e,t,n){e.exports={root:"order-card_root__2LFRS",container:"order-card_container__9btoO",name:"order-card_name__326B0",list:"order-card_list__AKzLo",item:"order-card_item__2gtWu",price:"order-card_price__-diZe",statusDone:"order-card_statusDone__2tUa8"}},27:function(e,t,n){e.exports={root:"ingredient-details_root__34ja7",picture:"ingredient-details_picture__1pFSX",nutrients:"ingredient-details_nutrients__2PQmc",info:"ingredient-details_info__3sKKx"}},28:function(e,t,n){e.exports={main:"order-info_main__2Or4f",root:"order-info_root__3-ADN",name:"order-info_name__32kdw",status:"order-info_status__166en",scrollArea:"order-info_scrollArea__2esDc",bottom:"order-info_bottom__2WH2n",price:"order-info_price__2wU2C"}},32:function(e,t,n){e.exports={list:"profile-navigation_list__1IfMU",link:"profile-navigation_link__vcA1G",active:"profile-navigation_active__12XhL"}},37:function(e,t,n){e.exports={link:"ingredient-card_link__3bQr1",figure:"ingredient-card_figure__1B7QP",price:"ingredient-card_price__1lv8R",caption:"ingredient-card_caption__19JBH"}},38:function(e,t,n){e.exports={section:"burger-ingredients_section__1fyCq",tabs:"burger-ingredients_tabs__4rh1m",scrollArea:"burger-ingredients_scrollArea__1jZUb",cards:"burger-ingredients_cards__1KtHb"}},47:function(e,t,n){e.exports={section:"orders-page_section__358-m",scrollArea:"orders-page_scrollArea__z89qi",item:"orders-page_item__hILMA",link:"orders-page_link__GaR-R"}},48:function(e,t,n){e.exports={section:"burger-constructor_section__1fkBH",scrollArea:"burger-constructor_scrollArea__x8WNO",total:"burger-constructor_total__39gSI"}},49:function(e,t,n){e.exports={main:"auth-form_main__2l3Lh",heading:"auth-form_heading__2VrT-",form:"auth-form_form__1RgYR",info:"auth-form_info__3wHI2"}},50:function(e,t,n){e.exports={section:"feed-list_section__1LHy6",scrollArea:"feed-list_scrollArea__3POxY",item:"feed-list_item__F0MNo",link:"feed-list_link__3RZsC"}},61:function(e,t,n){e.exports={root:"ingredient-preview_root__3Feru",image:"ingredient-preview_image__2Cmix",cover:"ingredient-preview_cover__2NjIQ"}},62:function(e,t,n){e.exports={root:"modal_root__1bJjw",close:"modal_close__77dZc",header:"modal_header__349Qp"}},63:function(e,t,n){e.exports={root:"order-item_root__vV9c9",title:"order-item_title__Gpv9u",price:"order-item_price__1PyMh"}},84:function(e,t,n){e.exports={buttons:"profile-page_buttons__kafvo"}},85:function(e,t,n){e.exports={main:"not-found-page_main__zAfqb",heading:"not-found-page_heading__3OnI_"}},86:function(e,t,n){e.exports={root:"order-details_root__134hp",order:"order-details_order__1Zt97"}},87:function(e,t,n){e.exports={main:"profile-layout_main__2m9Yc",sidebar:"profile-layout_sidebar__V71hv"}}},[[207,1,2]]]);
//# sourceMappingURL=main.2a4e1530.chunk.js.map