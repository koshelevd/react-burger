{"version":3,"sources":["pages/main-page/main-page.module.css","pages/feed-page/feed-page.module.css","components/modal/modal-overlay/modal-overlay.module.css","components/burger-constructor/draggable-constructor-element/draggable-constructor-element.module.css","components/app-header/app-header.module.css","pages/main-page/main-page.tsx","utils/cookies.ts","utils/constants.ts","utils/api.ts","utils/api-conf.ts","services/slices/order-slice.ts","services/slices/composition-slice.ts","services/slices/ingredients-slice.ts","utils/data.ts","services/slices/modal-slice.ts","services/slices/forgot-password-slice.ts","services/slices/reset-password-slice.ts","services/slices/auth-slice.ts","services/slices/websocket-slice.ts","services/slices/feed-slice.ts","services/rootReducer.ts","services/middlewares/socketMiddleware.ts","services/store.ts","pages/feed-page/feed-page.tsx","components/feed-list/ingredient-preview/ingredient-preview.tsx","utils/date.ts","utils/status.ts","components/feed-list/order-card/order-card.tsx","pages/orders-page/orders-page.tsx","hooks/useFormWithValidation.ts","pages/login-page/login-page.tsx","pages/register-page/register-page.tsx","pages/forgot-password-page/forgot-password-page.tsx","pages/reset-password-page/reset-password-page.tsx","pages/profile-page/profile-page.tsx","pages/not-found-page/not-found-page.tsx","components/modal/modal-overlay/modal-overlay.tsx","components/app/app.tsx","components/modal/modal.tsx","assets/images/done.png","components/order-details/order-details.tsx","components/burger-constructor/draggable-constructor-element/draggable-constructor-element.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-ingredients/ingredient-card/ingredient-card.tsx","components/burger-ingredients/burger-ingredients.tsx","hooks/useTopType.ts","components/ingredient-details/ingredient-details.tsx","components/order-info/order-info.tsx","components/order-info/order-item/order-item.tsx","components/auth-form/auth-form.tsx","components/profile-navigation/profile-navigation.tsx","components/require-auth/require-auth.tsx","components/app-header/app-header.tsx","components/layout/layout.tsx","components/profile-layout/profile-layout.tsx","components/feed-list/feed-list.tsx","components/feed-summary/feed-summary.tsx","index.tsx","components/feed-summary/feed-summary.module.css","components/feed-list/order-card/order-card.module.css","components/ingredient-details/ingredient-details.module.css","components/order-info/order-info.module.css","components/profile-navigation/profile-navigation.module.css","components/burger-ingredients/ingredient-card/ingredient-card.module.css","components/burger-ingredients/burger-ingredients.module.css","pages/orders-page/orders-page.module.css","components/burger-constructor/burger-constructor.module.css","components/auth-form/auth-form.module.css","components/feed-list/feed-list.module.css","components/feed-list/ingredient-preview/ingredient-preview.module.css","components/modal/modal.module.css","components/order-info/order-item/order-item.module.css","pages/profile-page/profile-page.module.css","pages/not-found-page/not-found-page.module.css","components/order-details/order-details.module.css","components/profile-layout/profile-layout.module.css"],"names":["module","exports","MainPage","className","styles","main","DndProvider","backend","HTML5Backend","setCookie","name","value","props","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","ACCESS_TOKEN_COOKIE_NAME","REFRESH_TOKEN_COOKIE_NAME","FULFILLED_FORGOT_REQUEST_KEY","WS_API_URL","WS_FEED_ENDPOINT","WS_USER_ORDERS_ENDPOINT","api","baseUrl","endpoints","getIngredientsUrl","checkoutUrl","forgotPasswordUrl","resetPasswordUrl","signUpUrl","signInUrl","signOutUrl","refreshTokenUrl","profileUrl","headers","_retriableFetch","url","options","a","fetch","res","_processResponse","message","refreshToken","refreshData","accessToken","split","authorization","forgotPassword","data","_postRequest","resetPassword","signUp","signIn","signOut","token","this","ingredients","checkout","profile","Accept","response","ok","json","responseJSON","status","Promise","reject","Error","method","body","JSON","stringify","then","createAsyncThunk","orderSlice","createSlice","initialState","info","isRequestProcessing","isRequestFailed","error","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","order","rejected","components","activeBun","compositionSlice","addCompositionItem","push","uuid","removeCompositionItem","splice","index","selectActiveBun","swapItems","hoverIndex","dragIndex","actions","all","isRequestSucceded","types","slug","title","fetchIngredients","getIngredients","addIngredient","result","ingredient","type","map","i","_id","count","removeIngredient","find","clearQuantities","forEach","ingredientsSlice","showOrderModal","modalSlice","openOrder","closeModals","forgotPasswordSlice","success","localStorage","setItem","resetPasswordSlice","removeItem","isLoggedIn","user","getProfile","getUserInfo","patchProfile","patchUserInfo","setLoggedIn","authToken","authSlice","clearError","setLoggedOut","websocketSlice","wsConnected","wsError","wsConnectionStart","wsConnectionStop","wsConnectionSuccess","wsConnectionError","wsConnectionClosed","loadFeed","dispatch","useAppDispatch","feedSlice","request","closeFeed","total","totalToday","failed","setData","orders","rootReducer","combineReducers","ingredientsReducer","isModalOpen","modalSliceReducer","composition","compositionReducer","orderSliceReducer","forgotPasswordSliceReducer","resetPasswordSliceReducer","auth","reducer","ws","feed","store","configureStore","middleware","getDefaultMiddleware","concat","socket","next","wsUrl","WebSocket","close","onopen","onerror","onmessage","event","parse","parsedData","onclose","devTools","process","useDispatch","useAppSelector","useSelector","FeedPage","useEffect","IngredientPreview","React","memo","root","src","image_mobile","alt","image","cover","formatDate","date","formatRelative","locale","ru","join","getStatus","code","OrderCard","showStatus","useLocation","pathname","includes","statusColorStyle","statusDone","allIngredients","ingredientsArray","id","price","reduce","acc","val","uniqueIngredients","reversedIngredients","slice","reverse","container","number","createdAt","list","item","length","toString","OrdersPage","location","useState","reversedOrders","setReversedOrders","section","scrollArea","to","backgroundLocation","link","useFormWithValidation","defaultValues","values","setValues","errors","setErrors","isValid","setIsValid","handleChange","evt","input","target","validationMessage","closest","checkValidity","resetForm","useCallback","newValues","newIsValid","LoginPage","email","password","from","header","buttonText","formInfo","text","linkTitle","linkUrl","onSubmit","e","preventDefault","placeholder","errorText","onChange","RegisterPage","ForgotPasswordPage","ResetPasswordPage","responseError","getItem","ProfilePage","isEditName","setIsEditName","isEditEmail","setIsEditEmail","isEditPassword","setIsEditPassword","onEditEnd","form","icon","onIconClick","disabled","buttons","onClick","NotFoundPage","heading","ModalOverlay","children","closeHandler","currentTarget","override","css","App","navigate","useNavigate","isIngredientsLoading","isOrderLoading","isFeedLoading","isLoading","setIsLoading","handleModalClose","element","color","loading","size","modalRoot","getElementById","Modal","popupClose","onClose","handleEscapeClose","key","addEventListener","removeEventListener","ReactDOM","createPortal","OrderDetails","orderId","doneIcon","DraggableConstructorElement","ref","useRef","swapIngredients","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","current","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","useDrag","drag","thumbnail","handleClose","deleteIngredient","BurgerConstructor","itemId","handleDrop","isHover","isOver","dropTarget","outline","totalPrice","useMemo","modal","style","isLocked","IngredientCard","dragRef","figure","picture","caption","BurgerIngredients","bunRef","sauceRef","mainRef","items","listRef","topType","setTopType","onScroll","listTop","minDiff","Number","MAX_VALUE","diff","Math","abs","useTopType","tabs","active","scrollIntoView","behavior","block","inline","cards","filter","IngredientDetails","useParams","selectedIngredient","image_large","nutrients","calories","proteins","fat","carbohydrates","OrderInfo","setIngredients","setPrice","selectedOrder","ingredientsCount","finded","OrderItem","AuthForm","idx","ProfileNavigation","isProfilePage","useMatch","isOrdersPage","linkStyle","isActive","RequireAuth","redirectTo","AppHeader","isMainPage","isFeedPage","nav","menu","logo","menu_right","Layout","ProfileLayout","sidebar","FeedList","FeedSummary","topContainer","column","orderDone","orderPending","render","StrictMode"],"mappings":"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","file":"static/js/main.2a4e1530.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main-page_main__2bldC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed-page_main__2Tr7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal-overlay_root__17qNp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"draggable-constructor-element_element__Rps_E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__3e8Wq\",\"nav\":\"app-header_nav__1KYZX\",\"menu\":\"app-header_menu__3zdQQ\",\"menu_right\":\"app-header_menu_right__1N_uo\",\"item\":\"app-header_item__VS6Go\",\"logo\":\"app-header_logo__1tYut\",\"link\":\"app-header_link__3YlVj\",\"text\":\"app-header_text__2BxaU\",\"active\":\"app-header_active__YRgFm\"};","import { FC } from 'react';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { BurgerIngredients, BurgerConstructor } from '../../components';\r\nimport styles from './main-page.module.css';\r\n\r\nconst MainPage: FC = () => {\r\n  return (\r\n    <main className={`${styles.main} pl-5 pr-5`}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <BurgerIngredients />\r\n        <BurgerConstructor />\r\n      </DndProvider>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default MainPage;\r\n","import { TCookiesProps } from './types';\r\n\r\nexport function setCookie(name: string, value: string | undefined, props?: TCookiesProps) {\r\n  if (!value) return;\r\n  props = props || {path: '/'};\r\n  let exp = props.expires;\r\n  if (typeof exp == 'number' && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp instanceof Date && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + '=' + value;\r\n  for (const propName in props) {\r\n    updatedCookie += '; ' + propName;\r\n    const propValue = props[propName];\r\n    if (!propValue) {\r\n      updatedCookie += '=' + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function getCookie(name: string) {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      '(?:^|; )' + name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, '\\\\$1') + '=([^;]*)',\r\n    ),\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, '', {\r\n    'max-age': '-1',\r\n  });\r\n}\r\n","export const ACCESS_TOKEN_COOKIE_NAME: string = 'token';\r\nexport const REFRESH_TOKEN_COOKIE_NAME: string = 'RefreshToken';\r\nexport const FULFILLED_FORGOT_REQUEST_KEY: string = 'fulfilledForgotRequest';\r\nexport const WS_API_URL = 'wss://norma.nomoreparties.space';\r\nexport const WS_FEED_ENDPOINT = '/orders/all';\r\nexport const WS_USER_ORDERS_ENDPOINT = '/orders';\r\n","import { API_URL, ENDPOINTS, ERROR_TEXT } from './api-conf';\r\nimport { getCookie, setCookie } from './cookies';\r\nimport {\r\n  ACCESS_TOKEN_COOKIE_NAME,\r\n  REFRESH_TOKEN_COOKIE_NAME,\r\n} from './constants';\r\nimport {\r\n  IApiOptions,\r\n  IApiResponse,\r\n  IEndpointsConf,\r\n  THeaders,\r\n  TOrderData,\r\n  TRequestData,\r\n  TResponseBody,\r\n  TUrl,\r\n} from './types';\r\n\r\nclass Api {\r\n  protected readonly getIngredientsUrl: TUrl;\r\n  protected readonly checkoutUrl: TUrl;\r\n  protected readonly forgotPasswordUrl: TUrl;\r\n  protected readonly resetPasswordUrl: TUrl;\r\n  protected readonly signUpUrl: TUrl;\r\n  protected readonly signInUrl: TUrl;\r\n  protected readonly signOutUrl: TUrl;\r\n  protected readonly refreshTokenUrl: TUrl;\r\n  protected readonly profileUrl: TUrl;\r\n  protected readonly headers: THeaders;\r\n\r\n  constructor(baseUrl: TUrl, endpoints: IEndpointsConf) {\r\n    // Initialize object.\r\n    this.getIngredientsUrl = baseUrl + endpoints.ingredients;\r\n    this.checkoutUrl = baseUrl + endpoints.checkout;\r\n    this.forgotPasswordUrl = baseUrl + endpoints.forgotPassword;\r\n    this.resetPasswordUrl = baseUrl + endpoints.resetPassword;\r\n    this.signUpUrl = baseUrl + endpoints.signUp;\r\n    this.signInUrl = baseUrl + endpoints.signIn;\r\n    this.signOutUrl = baseUrl + endpoints.signOut;\r\n    this.refreshTokenUrl = baseUrl + endpoints.refreshToken;\r\n    this.profileUrl = baseUrl + endpoints.profile;\r\n    this.headers = {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json; charset=utf-8',\r\n    };\r\n  }\r\n\r\n  protected async _processResponse(response: Response): Promise<IApiResponse> {\r\n    // Return JSON response if status is ok or generate error.\r\n    if (response.ok) {\r\n      return await response.json();\r\n    }\r\n    const responseJSON = await response.json();\r\n    const message = responseJSON.message ?? `${ERROR_TEXT}: ${response.status}`;\r\n    return Promise.reject(new Error(message));\r\n  }\r\n\r\n  protected _postRequest(url: TUrl, data: {}): Promise<IApiResponse> {\r\n    return fetch(url, {\r\n      method: 'POST',\r\n      headers: this.headers,\r\n      body: JSON.stringify(data),\r\n    }).then(this._processResponse);\r\n  }\r\n\r\n  protected _retriableFetch = async (\r\n    url: TUrl,\r\n    options: IApiOptions,\r\n  ): Promise<IApiResponse> => {\r\n    try {\r\n      const res = await fetch(url, options);\r\n      return await this._processResponse(res);\r\n    } catch (err) {\r\n      if ((err as TResponseBody)?.message === 'jwt expired') {\r\n        const refreshData = await this.refreshToken();\r\n        setCookie(REFRESH_TOKEN_COOKIE_NAME, refreshData.refreshToken);\r\n        setCookie(\r\n          ACCESS_TOKEN_COOKIE_NAME,\r\n          refreshData.accessToken?.split('Bearer ')[1],\r\n        );\r\n        options.headers = options.headers ?? {};\r\n        // options.headers.set('authorization', refreshData.accessToken)\r\n        options.headers.authorization = refreshData.accessToken;\r\n        const res = await fetch(url, options);\r\n        return await this._processResponse(res);\r\n      } else {\r\n        throw err;\r\n      }\r\n    }\r\n  };\r\n\r\n  public getUserInfo(): Promise<IApiResponse> {\r\n    // Get user's profile info.\r\n    const token = getCookie(ACCESS_TOKEN_COOKIE_NAME);\r\n    return this._retriableFetch(this.profileUrl, {\r\n      headers: {\r\n        ...this.headers,\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n  }\r\n\r\n  public patchUserInfo(\r\n    data: TRequestData<string, string>,\r\n  ): Promise<IApiResponse> {\r\n    // Change user's profile info.\r\n    const token = getCookie(ACCESS_TOKEN_COOKIE_NAME);\r\n    return this._retriableFetch(this.profileUrl, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        ...this.headers,\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  public getIngredients(): Promise<IApiResponse> {\r\n    // Get all ingredients data.\r\n    return fetch(this.getIngredientsUrl, {\r\n      headers: this.headers,\r\n    }).then(this._processResponse);\r\n  }\r\n\r\n  public checkout(data: TOrderData): Promise<IApiResponse> {\r\n    // Process checkout: post ingredients.\r\n    const token = getCookie(ACCESS_TOKEN_COOKIE_NAME);\r\n    return this._retriableFetch(this.checkoutUrl, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...this.headers,\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Post data to obtain verification token for pass reset.\r\n  public forgotPassword = (\r\n    data: TRequestData<string, string>,\r\n  ): Promise<IApiResponse> => this._postRequest(this.forgotPasswordUrl, data);\r\n\r\n  // Post data to reset password.\r\n  public resetPassword = (\r\n    data: TRequestData<string, string>,\r\n  ): Promise<IApiResponse> => this._postRequest(this.resetPasswordUrl, data);\r\n\r\n  // Post data to register new user.\r\n  public signUp = (data: TRequestData<string, string>): Promise<IApiResponse> =>\r\n    this._postRequest(this.signUpUrl, data);\r\n\r\n  // Post data to login user.\r\n  public signIn = (data: TRequestData<string, string>): Promise<IApiResponse> =>\r\n    this._postRequest(this.signInUrl, data);\r\n\r\n  // Post data to logout user.\r\n  public signOut = (): Promise<IApiResponse> =>\r\n    this._postRequest(this.signOutUrl, {\r\n      token: getCookie(REFRESH_TOKEN_COOKIE_NAME),\r\n    });\r\n\r\n  // Post refresh token to retreive fresh access token.\r\n  public refreshToken = (): Promise<IApiResponse> =>\r\n    this._postRequest(this.refreshTokenUrl, {\r\n      token: getCookie(REFRESH_TOKEN_COOKIE_NAME),\r\n    });\r\n}\r\n\r\nconst api = new Api(API_URL, ENDPOINTS);\r\nexport default api;\r\n","import { IEndpointsConf, TUrl } from \"./types\";\r\n\r\nexport const API_URL: TUrl = 'https://norma.nomoreparties.space/api';\r\nexport const ENDPOINTS: IEndpointsConf = {\r\n  ingredients: '/ingredients',\r\n  checkout: '/orders',\r\n  forgotPassword: '/password-reset',\r\n  resetPassword: '/password-reset/reset',\r\n  signUp: '/auth/register',\r\n  signIn: '/auth/login',\r\n  signOut: '/auth/logout',\r\n  refreshToken: '/auth/token',\r\n  profile: '/auth/user'\r\n};\r\nexport const ERROR_TEXT: string = 'Error';\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from '../../utils/api';\r\nimport { IApiResponse, IOrderState, TOrderData } from '../../utils/types';\r\n\r\nconst initialState = {\r\n  info: {},\r\n  isRequestProcessing: false,\r\n  isRequestFailed: false,\r\n  error: null,\r\n} as IOrderState;\r\n\r\nexport const checkout = createAsyncThunk('order/checkout', (data: TOrderData) =>\r\n  api.checkout(data).then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nconst orderSlice = createSlice({\r\n  name: 'order',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(checkout.pending, (state) => {\r\n        state.isRequestProcessing = true;\r\n        state.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(checkout.fulfilled, (state, action) => {\r\n        state.info = action.payload.order;\r\n        state.isRequestProcessing = false;\r\n      })\r\n      .addCase(checkout.rejected, (state, action) => {\r\n        state.isRequestProcessing = false;\r\n        state.isRequestFailed = true;\r\n        state.error = action.error;\r\n      });\r\n  },\r\n});\r\n\r\nexport default orderSlice.reducer;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { v4 as uuid } from 'uuid';\r\nimport { ICompositionState } from '../../utils/types';\r\nimport { checkout } from './order-slice';\r\n\r\nconst initialState = {\r\n  components: [],\r\n  activeBun: null,\r\n} as ICompositionState;\r\n\r\nconst compositionSlice = createSlice({\r\n  name: 'composition',\r\n  initialState,\r\n  reducers: {\r\n    addCompositionItem(state, action) {\r\n      state.components.push({ ...action.payload, uuid: uuid() });\r\n    },\r\n    removeCompositionItem(state, action) {\r\n      state.components.splice(action.payload.index, 1);\r\n    },\r\n    selectActiveBun(state, action) {\r\n      state.activeBun = action.payload;\r\n    },\r\n    swapItems(state, action) {\r\n      state.components.splice(\r\n        action.payload.hoverIndex,\r\n        0,\r\n        state.components.splice(action.payload.dragIndex, 1)[0],\r\n      );\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(checkout.fulfilled, () => initialState);\r\n  },\r\n});\r\n\r\nexport const {\r\n  addCompositionItem,\r\n  removeCompositionItem,\r\n  selectActiveBun,\r\n  swapItems,\r\n} = compositionSlice.actions;\r\n\r\nexport default compositionSlice.reducer;\r\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\r\nimport { INGREDIENTS_TYPES } from '../../utils/data';\r\nimport {\r\n  addCompositionItem,\r\n  removeCompositionItem,\r\n  selectActiveBun,\r\n} from './composition-slice';\r\nimport { checkout } from './order-slice';\r\nimport api from '../../utils/api';\r\nimport { IApiResponse, IIngredientState, TIngredient } from '../../utils/types';\r\n\r\nconst initialState = {\r\n  all: [],\r\n  isRequestProcessing: false,\r\n  isRequestFailed: false,\r\n  isRequestSucceded: false,\r\n  error: null,\r\n  types: INGREDIENTS_TYPES,\r\n} as IIngredientState;\r\n\r\nexport const fetchIngredients = createAsyncThunk(\r\n  'ingredients/fetchIngredients',\r\n  () => api.getIngredients().then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nfunction addIngredient(\r\n  state: IIngredientState,\r\n  action: PayloadAction<TIngredient>,\r\n) {\r\n  const ingredient = action.payload;\r\n  let result;\r\n  if (ingredient.type === 'bun') {\r\n    result = state.all && state.all.map((i) => {\r\n      if (i._id === ingredient._id) {\r\n        return { ...i, count: 2 };\r\n      } else if (i.type === 'bun') {\r\n        return { ...i, count: 0 };\r\n      }\r\n      return i;\r\n    });\r\n  } else {\r\n    result = state.all && state.all.map((i) => {\r\n      if (i._id === ingredient._id && !!i.count) {\r\n        return { ...i, count: i.count + 1 };\r\n      } else if (i._id === ingredient._id) {\r\n        return { ...i, count: 1 };\r\n      }\r\n      return i;\r\n    });\r\n  }\r\n  state.all = result;\r\n}\r\n\r\nfunction removeIngredient(\r\n  state: IIngredientState,\r\n  action: PayloadAction<{ index: number; ingredient: TIngredient }>,\r\n) {\r\n  const ingredient = state.all && state.all.find(\r\n    (i) => i._id === action.payload.ingredient._id,\r\n  );\r\n  if (ingredient && ingredient.count) ingredient.count -= 1;\r\n}\r\n\r\nfunction clearQuantities(state: IIngredientState) {\r\n  state.all && state.all.forEach((ingredient) => {\r\n    ingredient.count = 0;\r\n  });\r\n}\r\n\r\nconst ingredientsSlice = createSlice({\r\n  name: 'ingredients',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchIngredients.pending, (state) => {\r\n        state.isRequestProcessing = true;\r\n        state.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchIngredients.fulfilled, (state, action) => {\r\n        state.all = action.payload.data;\r\n        state.isRequestProcessing = false;\r\n      })\r\n      .addCase(fetchIngredients.rejected, (state, action) => {\r\n        state.isRequestProcessing = false;\r\n        state.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      })\r\n      .addCase(addCompositionItem, addIngredient)\r\n      .addCase(selectActiveBun, addIngredient)\r\n      .addCase(removeCompositionItem, removeIngredient)\r\n      .addCase(checkout.fulfilled, clearQuantities);\r\n  },\r\n});\r\n\r\nexport default ingredientsSlice.reducer;\r\n","import { TIngredientType } from \"./types\";\r\n\r\nexport const INGREDIENTS_TYPES: Array<TIngredientType> = [\r\n  { slug: 'bun', title: 'Булки' },\r\n  { slug: 'sauce', title: 'Соусы' },\r\n  { slug: 'main', title: 'Начинки' },\r\n];\r\n\r\nexport const DEFAULT_ORDER_ID: number = 0;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { checkout } from './order-slice';\r\n\r\nconst initialState = {\r\n  order: false,\r\n};\r\n\r\nfunction showOrderModal() {\r\n  return {\r\n    ...initialState,\r\n    order: true,\r\n  };\r\n}\r\n\r\nfunction hideModals() {\r\n  return initialState;\r\n}\r\n\r\nconst modalSlice = createSlice({\r\n  name: 'modal',\r\n  initialState,\r\n  reducers: {\r\n    openOrder: showOrderModal,\r\n    closeModals: hideModals,\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(checkout.fulfilled, showOrderModal);\r\n  },\r\n});\r\n\r\nexport const { openOrder, closeModals } = modalSlice.actions;\r\n\r\nexport default modalSlice.reducer;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from '../../utils/api';\r\nimport { FULFILLED_FORGOT_REQUEST_KEY } from '../../utils/constants';\r\nimport {\r\n  IPasswordState,\r\n  IApiResponse,\r\n  TRequestData,\r\n} from '../../utils/types';\r\n\r\nconst initialState = {\r\n  isRequestProcessing: false,\r\n  isRequestFailed: false,\r\n  isRequestSucceded: false,\r\n  error: null,\r\n} as IPasswordState;\r\n\r\nexport const forgotPassword = createAsyncThunk(\r\n  'forgotPassword',\r\n  (data: TRequestData<string, string>) =>\r\n    api.forgotPassword(data).then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nconst forgotPasswordSlice = createSlice({\r\n  name: 'forgotPassword',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(forgotPassword.pending, (state) => {\r\n        state.isRequestProcessing = true;\r\n        state.isRequestFailed = false;\r\n        state.isRequestSucceded = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(forgotPassword.fulfilled, (state, action) => {\r\n        state.isRequestSucceded = action.payload.success;\r\n        state.error = action.payload.success ? null : action.payload.message;\r\n        state.isRequestProcessing = false;\r\n        localStorage.setItem(FULFILLED_FORGOT_REQUEST_KEY, 'true');\r\n      })\r\n      .addCase(forgotPassword.rejected, (state, action) => {\r\n        state.isRequestProcessing = false;\r\n        state.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport default forgotPasswordSlice.reducer;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from '../../utils/api';\r\nimport { FULFILLED_FORGOT_REQUEST_KEY } from '../../utils/constants';\r\nimport {\r\n  IPasswordState,\r\n  IApiResponse,\r\n  TRequestData,\r\n} from '../../utils/types';\r\n\r\nconst initialState = {\r\n  isRequestProcessing: false,\r\n  isRequestFailed: false,\r\n  isRequestSucceded: false,\r\n  error: null,\r\n} as IPasswordState;\r\n\r\nexport const resetPassword = createAsyncThunk('resetPassword', (data: TRequestData<string, string>) =>\r\n  api.resetPassword(data).then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nconst resetPasswordSlice = createSlice({\r\n  name: 'resetPassword',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(resetPassword.pending, (state) => {\r\n        state.isRequestSucceded = false;\r\n        state.isRequestProcessing = true;\r\n        state.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(resetPassword.fulfilled, (state, action) => {\r\n        state.isRequestSucceded = action.payload.success;\r\n        state.error = action.payload.success ? null : action.payload.message;\r\n        state.isRequestProcessing = false;\r\n        localStorage.removeItem(FULFILLED_FORGOT_REQUEST_KEY);\r\n      })\r\n      .addCase(resetPassword.rejected, (state, action) => {\r\n        state.isRequestProcessing = false;\r\n        state.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport default resetPasswordSlice.reducer;\r\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\r\nimport api from '../../utils/api';\r\nimport { getCookie, setCookie, deleteCookie } from '../../utils/cookies';\r\nimport {\r\n  ACCESS_TOKEN_COOKIE_NAME,\r\n  REFRESH_TOKEN_COOKIE_NAME,\r\n} from '../../utils/constants';\r\nimport { IAuthState, IApiResponse, TRequestData } from '../../utils/types';\r\n\r\nconst initialState = {\r\n  isLoggedIn: !!getCookie(ACCESS_TOKEN_COOKIE_NAME),\r\n  user: null,\r\n  profile: {\r\n    isRequestProcessing: false,\r\n    isRequestFailed: false,\r\n    isRequestSucceded: false,\r\n  },\r\n  signUp: {\r\n    isRequestProcessing: false,\r\n    isRequestFailed: false,\r\n    isRequestSucceded: false,\r\n  },\r\n  signIn: {\r\n    isRequestProcessing: false,\r\n    isRequestFailed: false,\r\n    isRequestSucceded: false,\r\n  },\r\n  signOut: {\r\n    isRequestProcessing: false,\r\n    isRequestFailed: false,\r\n    isRequestSucceded: false,\r\n  },\r\n  error: null,\r\n} as IAuthState;\r\n\r\nexport const signUp = createAsyncThunk(\r\n  'signUp',\r\n  (data: TRequestData<string, string>) =>\r\n    api.signUp(data).then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nexport const signIn = createAsyncThunk(\r\n  'signIn',\r\n  (data: TRequestData<string, string>) =>\r\n    api.signIn(data).then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nexport const signOut = createAsyncThunk(\r\n  'signOut',\r\n  () => api.signOut().then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nexport const getProfile = createAsyncThunk(\r\n  'getProfile',\r\n  () => api.getUserInfo().then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nexport const patchProfile = createAsyncThunk(\r\n  'patchProfile',\r\n  (data: TRequestData<string, string>) =>\r\n    api.patchUserInfo(data).then((res) => res) as Promise<IApiResponse>,\r\n);\r\n\r\nconst setLoggedIn = (\r\n  state: IAuthState,\r\n  action: PayloadAction<IApiResponse>,\r\n) => {\r\n  const authToken =\r\n    action.payload.accessToken &&\r\n    action.payload.accessToken.split('Bearer ')[1];\r\n  const refreshToken = action.payload?.refreshToken;\r\n\r\n  if (authToken) {\r\n    setCookie(ACCESS_TOKEN_COOKIE_NAME, authToken);\r\n    state.isLoggedIn = true;\r\n    state.user = action.payload.user;\r\n  }\r\n  if (refreshToken) {\r\n    setCookie(REFRESH_TOKEN_COOKIE_NAME, refreshToken);\r\n  }\r\n};\r\n\r\nconst setLoggedOut = (state: IAuthState) => {\r\n  deleteCookie(ACCESS_TOKEN_COOKIE_NAME);\r\n  deleteCookie(REFRESH_TOKEN_COOKIE_NAME);\r\n  state.isLoggedIn = false;\r\n  state.user = null;\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    clearError: (state) => {\r\n      state.error = initialState.error;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(signUp.pending, (state: IAuthState) => {\r\n        state.signUp.isRequestSucceded = false;\r\n        state.signUp.isRequestProcessing = true;\r\n        state.signUp.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(signUp.fulfilled, (state: IAuthState, action) => {\r\n        if (action.payload.success) {\r\n          setLoggedIn(state, action);\r\n        } else {\r\n          state.error = action.payload.message;\r\n        }\r\n        state.signUp.isRequestProcessing = false;\r\n      })\r\n      .addCase(signUp.rejected, (state, action) => {\r\n        state.signUp.isRequestProcessing = false;\r\n        state.signUp.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      .addCase(signIn.pending, (state) => {\r\n        state.isLoggedIn = false;\r\n        state.signIn.isRequestProcessing = true;\r\n        state.signIn.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(signIn.fulfilled, (state, action) => {\r\n        if (action.payload.success) {\r\n          setLoggedIn(state, action);\r\n        } else {\r\n          state.error = action.payload.message;\r\n        }\r\n        state.signIn.isRequestProcessing = false;\r\n      })\r\n      .addCase(signIn.rejected, (state, action) => {\r\n        state.signIn.isRequestProcessing = false;\r\n        state.signIn.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      .addCase(signOut.pending, (state) => {\r\n        state.signOut.isRequestProcessing = true;\r\n        state.signOut.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(signOut.fulfilled, (state, action) => {\r\n        if (action.payload.success) {\r\n          setLoggedOut(state);\r\n        } else {\r\n          state.error = action.payload.message;\r\n        }\r\n        state.signOut.isRequestProcessing = false;\r\n      })\r\n      .addCase(signOut.rejected, (state, action) => {\r\n        state.signOut.isRequestProcessing = false;\r\n        state.signOut.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      .addCase(getProfile.pending, (state) => {\r\n        state.profile.isRequestProcessing = true;\r\n        state.profile.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(getProfile.fulfilled, (state, action) => {\r\n        if (action.payload.success) {\r\n          state.user = action.payload.user;\r\n        } else {\r\n          state.error = action.payload.message;\r\n        }\r\n        state.profile.isRequestProcessing = false;\r\n      })\r\n      .addCase(getProfile.rejected, (state, action) => {\r\n        state.profile.isRequestProcessing = false;\r\n        state.profile.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      .addCase(patchProfile.pending, (state) => {\r\n        state.profile.isRequestProcessing = true;\r\n        state.profile.isRequestFailed = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(patchProfile.fulfilled, (state, action) => {\r\n        if (action.payload.success) {\r\n          state.user = action.payload.user;\r\n        } else {\r\n          state.error = action.payload.message;\r\n        }\r\n        state.profile.isRequestProcessing = false;\r\n      })\r\n      .addCase(patchProfile.rejected, (state, action) => {\r\n        state.profile.isRequestProcessing = false;\r\n        state.profile.isRequestFailed = true;\r\n        state.error = action.error.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport default authSlice;\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { IWebsocketState } from '../../utils/types';\r\n\r\nconst initialState = {\r\n  wsConnected: false,\r\n  wsError: false,\r\n} as IWebsocketState;\r\n\r\nconst websocketSlice = createSlice({\r\n  name: 'ws',\r\n  initialState,\r\n  reducers: {\r\n    wsConnectionStart(\r\n      state,\r\n      action: PayloadAction<{ url: string; token?: string }>,\r\n    ) {},\r\n\r\n    wsConnectionStop(state) {\r\n      state.wsConnected = false;\r\n      state.wsError = false;\r\n    },\r\n\r\n    wsConnectionSuccess(state) {\r\n      state.wsConnected = true;\r\n      state.wsError = false;\r\n    },\r\n\r\n    wsConnectionError(state) {\r\n      state.wsConnected = false;\r\n      state.wsError = true;\r\n    },\r\n\r\n    wsConnectionClosed(state) {\r\n      state.wsConnected = false;\r\n      state.wsError = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default websocketSlice;\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { IFeedState, TOrder } from '../../utils/types';\r\nimport { useAppDispatch } from '../store';\r\nimport websocketSlice from './websocket-slice';\r\nimport {\r\n  ACCESS_TOKEN_COOKIE_NAME,\r\n  WS_API_URL,\r\n  WS_FEED_ENDPOINT,\r\n  WS_USER_ORDERS_ENDPOINT,\r\n} from '../../utils/constants';\r\nimport { getCookie } from '../../utils/cookies';\r\n\r\nexport const loadFeed = () => {\r\n  return (dispatch = useAppDispatch()) => {\r\n    dispatch(\r\n      websocketSlice.actions.wsConnectionStart({\r\n        url: `${WS_API_URL}${WS_FEED_ENDPOINT}`,\r\n      }),\r\n    );\r\n    dispatch(feedSlice.actions.request());\r\n  };\r\n};\r\n\r\nexport const loadUserFeed = () => {\r\n  return (dispatch = useAppDispatch()) => {\r\n    dispatch(\r\n      websocketSlice.actions.wsConnectionStart({\r\n        url: `${WS_API_URL}${WS_USER_ORDERS_ENDPOINT}`,\r\n        token: getCookie(ACCESS_TOKEN_COOKIE_NAME),\r\n      }),\r\n    );\r\n    dispatch(feedSlice.actions.request());\r\n  };\r\n};\r\n\r\nexport const closeFeed = () => {\r\n  return (dispatch = useAppDispatch()) => {\r\n    dispatch(websocketSlice.actions.wsConnectionStop());\r\n  };\r\n};\r\n\r\nconst initialState = {\r\n  all: [],\r\n  isRequestProcessing: false,\r\n  isRequestFailed: false,\r\n  isRequestSucceded: false,\r\n  error: null,\r\n  total: 0,\r\n  totalToday: 0,\r\n} as IFeedState;\r\n\r\nconst feedSlice = createSlice({\r\n  name: 'feed',\r\n  initialState,\r\n  reducers: {\r\n    request(state) {\r\n      state.isRequestProcessing = true;\r\n      state.isRequestFailed = false;\r\n      state.isRequestSucceded = false;\r\n    },\r\n    failed(state) {\r\n      state.isRequestFailed = true;\r\n      state.isRequestProcessing = false;\r\n      state.isRequestSucceded = false;\r\n    },\r\n    success(state) {\r\n      state.isRequestSucceded = true;\r\n      state.isRequestProcessing = false;\r\n      state.isRequestFailed = false;\r\n    },\r\n    setData(\r\n      state,\r\n      action: PayloadAction<{\r\n        orders: Array<TOrder>;\r\n        total: number;\r\n        totalToday: number;\r\n      }>,\r\n    ) {\r\n      state.all = action.payload.orders;\r\n      state.total = action.payload.total;\r\n      state.totalToday = action.payload.totalToday;\r\n    },\r\n  },\r\n});\r\n\r\nexport default feedSlice;\r\n","import { combineReducers } from 'redux';\r\nimport ingredientsReducer from './slices/ingredients-slice';\r\nimport modalSliceReducer from './slices/modal-slice';\r\nimport compositionReducer from './slices/composition-slice';\r\nimport orderSliceReducer from './slices/order-slice';\r\nimport forgotPasswordSliceReducer from './slices/forgot-password-slice';\r\nimport resetPasswordSliceReducer from './slices/reset-password-slice';\r\nimport authSlice from './slices/auth-slice';\r\nimport websocketSlice from './slices/websocket-slice';\r\nimport feedSlice from './slices/feed-slice';\r\n\r\nconst rootReducer = combineReducers({\r\n  ingredients: ingredientsReducer,\r\n  isModalOpen: modalSliceReducer,\r\n  composition: compositionReducer,\r\n  order: orderSliceReducer,\r\n  forgotPassword: forgotPasswordSliceReducer,\r\n  resetPassword: resetPasswordSliceReducer,\r\n  auth: authSlice.reducer,\r\n  ws: websocketSlice.reducer,\r\n  feed: feedSlice.reducer,\r\n});\r\n\r\nexport default rootReducer;\r\n\r\nexport type TRootState = ReturnType<typeof rootReducer>;\r\n","import { AnyAction, MiddlewareAPI } from 'redux';\r\nimport websocketSlice from '../slices/websocket-slice';\r\nimport feedSlice from '../slices/feed-slice';\r\n\r\nconst {\r\n  wsConnectionStart,\r\n  wsConnectionStop,\r\n  wsConnectionSuccess,\r\n  wsConnectionError,\r\n  wsConnectionClosed,\r\n} = websocketSlice.actions;\r\n\r\nexport const socketMiddleware = () => {\r\n  return (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: (action: AnyAction) => void) => (action: AnyAction) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === wsConnectionStart.type) {\r\n        const wsUrl: string = payload.token\r\n          ? `${payload.url}?token=${payload.token}`\r\n          : `${payload.url}`;      \r\n        socket = new WebSocket(wsUrl);\r\n      }\r\n\r\n      if (type === wsConnectionStop.type) {\r\n        socket && socket.close(1000, 'CLOSE_NORMAL');\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = () => {\r\n          dispatch(wsConnectionSuccess());\r\n        };\r\n\r\n        socket.onerror = () => {\r\n          dispatch(wsConnectionError());\r\n        };\r\n\r\n        socket.onmessage = (event) => {\r\n          const { data } = event;\r\n          const { success, ...parsedData } = JSON.parse(data);\r\n          if (success) {\r\n            dispatch(feedSlice.actions.success());\r\n            dispatch(feedSlice.actions.setData(parsedData));\r\n          }\r\n\r\n        };\r\n\r\n        socket.onclose = (event) => {\r\n          dispatch(wsConnectionClosed());\r\n        };\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport rootReducer, { TRootState } from './rootReducer';\r\nimport { socketMiddleware } from './middlewares/socketMiddleware';\r\n\r\nexport const store = configureStore({\r\n  reducer: rootReducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware().concat(socketMiddleware()),\r\n  devTools: process.env.NODE_ENV !== 'production',\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<TRootState> = useSelector;\r\n","import { FC, useEffect } from 'react';\r\nimport { FeedList, FeedSummary } from '../../components';\r\nimport styles from './feed-page.module.css';\r\nimport { useAppDispatch } from '../../services/store';\r\nimport { loadFeed, closeFeed } from '../../services/slices/feed-slice';\r\n\r\nconst FeedPage: FC = () => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(loadFeed());\r\n    return () => {\r\n      dispatch(closeFeed());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <main className={`${styles.main} pl-5 pr-5`}>\r\n      <FeedList />\r\n      <FeedSummary />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default FeedPage;\r\n","import React, { FC } from 'react';\r\nimport styles from './ingredient-preview.module.css';\r\nimport { IIngredientPreviewProps } from '../../../utils/types';\r\n\r\nconst IngredientPreview: FC<IIngredientPreviewProps> = React.memo(\r\n  ({ data, count }) => {\r\n    return (\r\n      <div className={styles.root}>\r\n        <img src={data.image_mobile} alt={data.name} className={styles.image} />\r\n        {count && (\r\n          <div className={`${styles.cover} `}>\r\n            <p className=\"text text_type_main-default  text_color_primary\">\r\n              +{count}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  },\r\n);\r\n\r\nexport default IngredientPreview;\r\n","import { formatRelative } from 'date-fns';\r\nimport { ru } from 'date-fns/locale';\r\n\r\nconst formatDate = (date: string | undefined) => {\r\n  if (date) {\r\n    const dateRelative = formatRelative(new Date(date), new Date(), {\r\n      locale: ru,\r\n    });\r\n    const words = dateRelative.split(' в ');\r\n    return words.join(', ') + ' i-GMT+3';\r\n  }\r\n};\r\n\r\nexport default formatDate;\r\n","const getStatus = (code: 'done' | 'pending' | 'created' | undefined) => {\r\n  switch (code) {\r\n    case 'done':\r\n      return 'Выполнен';\r\n    case 'pending':\r\n      return 'В работе';\r\n    case 'created':\r\n      return 'Создан';\r\n  }\r\n};\r\n\r\nexport default getStatus;\r\n","import React, { FC } from 'react';\r\nimport styles from './order-card.module.css';\r\nimport { IOrderCardProps, TIngredient } from '../../../utils/types';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport IngredientPreview from '../ingredient-preview/ingredient-preview';\r\nimport { TRootState } from '../../../services/rootReducer';\r\nimport formatDate from '../../../utils/date';\r\nimport { useLocation } from 'react-router-dom';\r\nimport getStatus from '../../../utils/status';\r\nimport { useAppSelector } from '../../../services/store';\r\n\r\nconst OrderCard: FC<IOrderCardProps> = React.memo(({ data }) => {\r\n  const location = useLocation();\r\n  const showStatus = location.pathname.includes('/profile/orders');\r\n  const statusColorStyle =\r\n    data?.status === 'done' ? styles.statusDone : 'text_color_primary';\r\n\r\n  const { allIngredients } = useAppSelector((state: TRootState) => ({\r\n    allIngredients: state.ingredients.all,\r\n  }));\r\n\r\n  const ingredientsArray: Array<TIngredient | undefined> = [];\r\n  data.ingredients.forEach((id) =>\r\n    ingredientsArray.push(allIngredients?.find((i) => i._id === id)),\r\n  );\r\n\r\n  const price = ingredientsArray.reduce(\r\n    (acc: number, val: any) => acc + val?.price,\r\n    0,\r\n  );\r\n\r\n  const uniqueIngredients: Array<TIngredient> = [];\r\n  ingredientsArray.forEach((ingredient) => {\r\n    const finded = uniqueIngredients.find((i) => i._id === ingredient?._id);\r\n    if (!finded && ingredient) uniqueIngredients.push(ingredient);\r\n  });\r\n  const reversedIngredients = uniqueIngredients.slice(0, 6).reverse();\r\n\r\n  return (\r\n    <article className={`${styles.root} pt-6 pb-6 pl-6 pr-6`}>\r\n      <div className={styles.container}>\r\n        <p className=\"text text_type_digits-default text_color_primary\">\r\n          #0{data.number}\r\n        </p>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n          {formatDate(data.createdAt)}\r\n        </p>\r\n      </div>\r\n      <h2\r\n        className={`${styles.name} text text_type_main-medium mt-6 text_color_primary`}\r\n      >\r\n        {data.name}\r\n      </h2>\r\n      {showStatus && (\r\n        <p className={`text text_type_main-default mt-2 ${statusColorStyle}`}>\r\n          {getStatus(data.status)}\r\n        </p>\r\n      )}\r\n      <div className={`${styles.container} mt-6`}>\r\n        <ul className={styles.list}>\r\n          {reversedIngredients.map(\r\n            (i, index) =>\r\n              i && (\r\n                <li key={index} className={styles.item}>\r\n                  <IngredientPreview\r\n                    key={i._id}\r\n                    data={i}\r\n                    count={\r\n                      (index === 0 &&\r\n                        uniqueIngredients.length - 6 > 0 &&\r\n                        uniqueIngredients.length - 6) as number\r\n                    }\r\n                  />\r\n                </li>\r\n              ),\r\n          )}\r\n        </ul>\r\n        <p className={styles.price}>\r\n          <span className=\"text text_type_digits-default text_color_primary mr-2\">\r\n            {price.toString()}\r\n          </span>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </p>\r\n      </div>\r\n    </article>\r\n  );\r\n});\r\n\r\nexport default OrderCard;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport OrderCard from '../../components/feed-list/order-card/order-card';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { loadUserFeed, closeFeed } from '../../services/slices/feed-slice';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\nimport { TOrder } from '../../utils/types';\r\nimport styles from './orders-page.module.css';\r\n\r\nconst OrdersPage: FC = React.memo(() => {\r\n  const location = useLocation();\r\n  const dispatch = useAppDispatch();\r\n  const { orders } = useAppSelector((state: TRootState) => ({\r\n    orders: state.feed.all,\r\n  }));\r\n  const [reversedOrders, setReversedOrders] = useState<Array<TOrder>>([]);\r\n\r\n  useEffect(() => {\r\n    dispatch(loadUserFeed());\r\n    return () => {\r\n      dispatch(closeFeed());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (orders.length > 0) {\r\n      setReversedOrders([...orders].reverse());\r\n    }\r\n  }, [orders]);\r\n\r\n  return (\r\n    <section className={styles.section}>\r\n      <ul className={styles.scrollArea}>\r\n        {reversedOrders.map((order) => (\r\n          <li key={order._id} className={styles.item}>\r\n            <Link\r\n              to={`/profile/orders/${order._id}`}\r\n              state={{ backgroundLocation: location }}\r\n              className={styles.link}\r\n            >\r\n              <OrderCard data={order} />\r\n            </Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default OrdersPage;\r\n","import { useState, useCallback } from 'react';\r\nimport { TFormErrors, TFormValues } from '../utils/types';\r\n\r\nexport function useFormWithValidation(defaultValues: TFormValues = {}) {\r\n  const [values, setValues] = useState(defaultValues);\r\n  const [errors, setErrors] = useState<TFormErrors>({});\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const handleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const input = evt.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    const validationMessage = input.validationMessage;\r\n\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: validationMessage });\r\n    setIsValid((input.closest('form') as HTMLFormElement).checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = { ...defaultValues }, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors({});\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid, defaultValues],\r\n  );\r\n\r\n  return {\r\n    values,\r\n    handleChange,\r\n    resetForm,\r\n    errors,\r\n    isValid,\r\n  };\r\n}\r\n","import React, { FC, useEffect } from 'react';\r\nimport { useLocation, Navigate } from 'react-router-dom';\r\nimport {\r\n  Input,\r\n  PasswordInput,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { AuthForm } from '../../components';\r\nimport authSlice, { signIn } from '../../services/slices/auth-slice';\r\nimport { useFormWithValidation } from '../../hooks/useFormWithValidation';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\n\r\nconst LoginPage: FC = () => {\r\n  const dispatch = useAppDispatch();\r\n  let location = useLocation();\r\n  const { clearError } = authSlice.actions;\r\n  const { isLoggedIn, error } = useAppSelector((store: TRootState) => store.auth);\r\n  const { values, handleChange, errors, isValid } = useFormWithValidation({\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const formInfo = [\r\n    {\r\n      text: 'Вы — новый пользователь?',\r\n      linkTitle: 'Зарегистрироваться',\r\n      linkUrl: '/register',\r\n    },\r\n    {\r\n      text: 'Забыли пароль?',\r\n      linkTitle: 'Восстановить пароль',\r\n      linkUrl: '/forgot-password',\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    dispatch(clearError());\r\n  }, [dispatch, clearError]);\r\n\r\n  function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    dispatch((signIn)(values));\r\n  }\r\n\r\n  if (isLoggedIn) return <Navigate to=\"/\" state={{ from: location }} />;\r\n\r\n  return (\r\n    <AuthForm\r\n      header=\"Вход\"\r\n      buttonText=\"Войти\"\r\n      formInfo={formInfo}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n      error={error}\r\n    >\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"email\"\r\n          placeholder=\"E-mail\"\r\n          value={values.email}\r\n          name=\"email\"\r\n          error={!!errors.email}\r\n          errorText={errors.email}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <PasswordInput\r\n          value={values.password}\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n    </AuthForm>\r\n  );\r\n}\r\nexport default LoginPage;\r\n","import { FC, FormEvent, useEffect } from 'react';\r\nimport { useLocation, Navigate } from 'react-router';\r\nimport {\r\n  Input,\r\n  PasswordInput,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { AuthForm } from '../../components';\r\nimport authSlice, { signUp } from '../../services/slices/auth-slice';\r\nimport { useFormWithValidation } from '../../hooks/useFormWithValidation';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\n\r\nconst RegisterPage: FC = () => {\r\n  const dispatch = useAppDispatch();\r\n  let location = useLocation();\r\n  const { clearError } = authSlice.actions;\r\n  const { isLoggedIn, error } = useAppSelector((store: TRootState) => store.auth);\r\n  const { values, handleChange, errors, isValid } = useFormWithValidation({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const formInfo = [\r\n    {\r\n      text: 'Уже зарегистрированы?',\r\n      linkTitle: 'Войти',\r\n      linkUrl: '/login',\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    dispatch(clearError());\r\n  }, [dispatch, clearError]);\r\n\r\n  function handleSubmit(e: FormEvent) {\r\n    e.preventDefault();\r\n    dispatch((signUp)(values));\r\n  }\r\n\r\n  if (isLoggedIn) return <Navigate to=\"/\" state={{ from: location }} />;\r\n\r\n  return (\r\n    <AuthForm\r\n      header=\"Регистрация\"\r\n      buttonText=\"Зарегистрироваться\"\r\n      formInfo={formInfo}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n      error={error}\r\n    >\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          value={values.name}\r\n          name=\"name\"\r\n          error={!!errors.name}\r\n          errorText={errors.name}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"email\"\r\n          placeholder=\"E-mail\"\r\n          value={values.email}\r\n          name=\"email\"\r\n          error={!!errors.email}\r\n          errorText={errors.email}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <PasswordInput\r\n          value={values.password}\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n    </AuthForm>\r\n  );\r\n}\r\nexport default RegisterPage;\r\n","import { FC, FormEvent } from 'react';\r\nimport { useLocation, Navigate } from 'react-router';\r\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { AuthForm } from '../../components';\r\nimport { forgotPassword } from '../../services/slices/forgot-password-slice';\r\nimport { useFormWithValidation } from '../../hooks/useFormWithValidation';\r\nimport { TFormInfo } from '../../utils/types';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\n\r\nconst ForgotPasswordPage: FC = () => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  let location = useLocation();\r\n  const { isRequestSucceded, error } = useAppSelector(\r\n    (store: TRootState) => store.forgotPassword,\r\n  );\r\n  const { isLoggedIn } = useAppSelector((store: TRootState) => store.auth);\r\n  const { values, handleChange, errors, isValid } = useFormWithValidation({\r\n    email: '',\r\n  });\r\n\r\n  const formInfo: Array<TFormInfo> = [\r\n    {\r\n      text: 'Вспомнили пароль?',\r\n      linkTitle: 'Войти',\r\n      linkUrl: '/login',\r\n    },\r\n  ];\r\n\r\n  function handleSubmit(e: FormEvent) {\r\n    e.preventDefault();\r\n    dispatch(forgotPassword({ email: values.email }));\r\n  }\r\n\r\n  if (isLoggedIn) return <Navigate to=\"/login\" state={{ from: location }} />;\r\n  if (isRequestSucceded)\r\n    return <Navigate to=\"/reset-password\" state={{ from: location }} />;\r\n\r\n  return (\r\n    <AuthForm\r\n      header=\"Восстановление пароля\"\r\n      buttonText=\"Восстановить\"\r\n      formInfo={formInfo}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n      error={error}\r\n    >\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"email\"\r\n          placeholder=\"Укажите e-mail\"\r\n          value={values.email}\r\n          name=\"email\"\r\n          error={!!errors.email}\r\n          errorText={errors.email}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n    </AuthForm>\r\n  );\r\n};\r\nexport default ForgotPasswordPage;\r\n","import { FC, FormEvent } from 'react';\r\nimport { useLocation, Navigate } from 'react-router';\r\nimport {\r\n  PasswordInput,\r\n  Input,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { AuthForm } from '../../components';\r\nimport { resetPassword } from '../../services/slices/reset-password-slice';\r\nimport { useFormWithValidation } from '../../hooks/useFormWithValidation';\r\nimport { FULFILLED_FORGOT_REQUEST_KEY } from '../../utils/constants';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\n\r\nconst ResetPasswordPage: FC = () => {\r\n  const dispatch = useAppDispatch();\r\n  let location = useLocation();\r\n  const { isRequestSucceded, error, responseError } = useAppSelector(\r\n    (store: TRootState) => store.resetPassword,\r\n  );\r\n  const { isLoggedIn } = useAppSelector((store: TRootState) => store.auth);\r\n  const { values, handleChange, errors, isValid } = useFormWithValidation({\r\n    password: '',\r\n    token: '',\r\n  });\r\n  const isFulfilled = localStorage.getItem(FULFILLED_FORGOT_REQUEST_KEY);\r\n\r\n  const formInfo = [\r\n    {\r\n      text: 'Вспомнили пароль?',\r\n      linkTitle: 'Войти',\r\n      linkUrl: '/login',\r\n    },\r\n  ];\r\n\r\n  function handleSubmit(e: FormEvent) {\r\n    e.preventDefault();\r\n    dispatch((resetPassword)({ ...values }));\r\n  }\r\n\r\n  if (!isFulfilled)\r\n    return <Navigate to=\"/forgot-password\" state={{ from: location }} />;\r\n  if (isLoggedIn || isRequestSucceded)\r\n    return <Navigate to=\"/login\" state={{ from: location }} />;\r\n\r\n  return (\r\n    <AuthForm\r\n      header=\"Восстановление пароля\"\r\n      buttonText=\"Сохранить\"\r\n      formInfo={formInfo}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n      error={responseError ?? error}\r\n    >\r\n      <div className=\"mb-6\">\r\n        <PasswordInput\r\n          value={values.password}\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          placeholder=\"Введите код из письма\"\r\n          value={values.token}\r\n          name=\"token\"\r\n          error={!!errors.token}\r\n          errorText={errors.token}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n    </AuthForm>\r\n  );\r\n}\r\nexport default ResetPasswordPage;\r\n","import { FC, FormEvent, useEffect, useState } from 'react';\r\nimport {\r\n  Input,\r\n  Button,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { getProfile, patchProfile } from '../../services/slices/auth-slice';\r\nimport { useFormWithValidation } from '../../hooks/useFormWithValidation';\r\nimport styles from './profile-page.module.css';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\n\r\nconst ProfilePage: FC = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { user } = useAppSelector((store: TRootState) => store.auth);\r\n  const { values, handleChange, errors, resetForm } = useFormWithValidation({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const [isEditName, setIsEditName] = useState(false);\r\n  const [isEditEmail, setIsEditEmail] = useState(false);\r\n  const [isEditPassword, setIsEditPassword] = useState(false);\r\n\r\n  function onEditEnd() {\r\n    setIsEditName(false);\r\n    setIsEditEmail(false);\r\n    setIsEditPassword(false);\r\n  }\r\n\r\n  function handleCancel(e: FormEvent) {\r\n    e.preventDefault();\r\n    onEditEnd();\r\n  }\r\n\r\n  function handleSubmit(e: FormEvent) {\r\n    e.preventDefault();\r\n    dispatch((patchProfile)(values));\r\n    onEditEnd();\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      dispatch(getProfile());\r\n    } else {\r\n      resetForm({ ...user, password: '' });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [user, dispatch]);\r\n\r\n  return (\r\n    <form className={styles.form}>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          placeholder=\"Имя\"\r\n          icon=\"EditIcon\"\r\n          value={values.name}\r\n          name=\"name\"\r\n          error={!!errors.name}\r\n          errorText={errors.name}\r\n          onChange={handleChange}\r\n          onIconClick={() => setIsEditName(!isEditName)}\r\n          disabled={!isEditName}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"email\"\r\n          placeholder=\"Логин\"\r\n          icon=\"EditIcon\"\r\n          value={values.email}\r\n          name=\"email\"\r\n          error={!!errors.email}\r\n          errorText={errors.email}\r\n          onChange={handleChange}\r\n          onIconClick={() => setIsEditEmail(!isEditEmail)}\r\n          disabled={!isEditEmail}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          placeholder=\"Пароль\"\r\n          icon=\"EditIcon\"\r\n          value={values.password}\r\n          name=\"password\"\r\n          error={!!errors.password}\r\n          errorText={errors.password}\r\n          onChange={handleChange}\r\n          onIconClick={() => setIsEditPassword(!isEditPassword)}\r\n          disabled={!isEditPassword}\r\n        />\r\n      </div>\r\n      {(isEditName || isEditEmail || isEditPassword) && (\r\n        <div className={styles.buttons}>\r\n          <Button onClick={handleSubmit}>Сохранить</Button>\r\n          <Button onClick={handleCancel} type=\"secondary\">\r\n            Отмена\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\nexport default ProfilePage;\r\n","import { FC } from 'react';\r\nimport styles from './not-found-page.module.css';\r\n\r\nconst NotFoundPage: FC = () => {\r\n  return (\r\n    <main className={styles.main}>\r\n      <h1 className={styles.heading}>Page not found</h1>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default NotFoundPage;\r\n","import { FC, MouseEventHandler } from 'react';\r\nimport styles from './modal-overlay.module.css';\r\nimport { closeModals } from '../../../services/slices/modal-slice';\r\nimport { IModalOverlayProps } from '../../../utils/types';\r\nimport { useAppDispatch } from '../../../services/store';\r\n\r\nconst ModalOverlay:FC<IModalOverlayProps> = ({ children, closeHandler }) => {\r\n  const dispatch = useAppDispatch();\r\n  const handleClose: MouseEventHandler<HTMLElement> = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      !!closeHandler ? closeHandler() : dispatch(closeModals());\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className={styles.root} onClick={handleClose}>\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ModalOverlay;\r\n","import { useCallback, useEffect, FC, useState } from 'react';\r\nimport {\r\n  Routes,\r\n  Route,\r\n  useLocation,\r\n  useNavigate,\r\n  Location,\r\n} from 'react-router-dom';\r\nimport { Layout, IngredientDetails, Modal, ProfileLayout, OrderInfo } from '..';\r\nimport {\r\n  ForgotPasswordPage,\r\n  LoginPage,\r\n  MainPage,\r\n  FeedPage,\r\n  OrdersPage,\r\n  NotFoundPage,\r\n  RegisterPage,\r\n  ProfilePage,\r\n  ResetPasswordPage,\r\n} from '../../pages';\r\nimport { RequireAuth } from '..';\r\nimport { fetchIngredients } from '../../services/slices/ingredients-slice';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\nimport { css } from '@emotion/react';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport ModalOverlay from '../../components/modal/modal-overlay/modal-overlay';\r\nimport { TRootState } from '../../services/rootReducer';\r\n\r\nconst override = css`\r\n  display: block;\r\n  margin: 0 auto;\r\n  border-color: '#0cc';\r\n  z-index: 100;\r\n`;\r\n\r\nconst App: FC = () => {\r\n  const location = useLocation();\r\n  const dispatch = useAppDispatch();\r\n  const backgroundLocation: Location = location.state?.backgroundLocation;\r\n  const navigate = useNavigate();\r\n  const { isIngredientsLoading, isOrderLoading, isFeedLoading } = useAppSelector(\r\n    (state: TRootState) => ({\r\n      isIngredientsLoading: state.ingredients.isRequestProcessing,\r\n      isOrderLoading: state.order.isRequestProcessing,\r\n      isFeedLoading: state.feed.isRequestProcessing,\r\n    }),\r\n  );\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleModalClose = useCallback(() => {\r\n    navigate(-1);\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchIngredients());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(isIngredientsLoading || isOrderLoading || isFeedLoading);\r\n  }, [isIngredientsLoading, isOrderLoading, isFeedLoading]);\r\n\r\n  return (\r\n    <>\r\n      <Routes location={backgroundLocation || location}>\r\n        <Route path=\"/\" element={<Layout />}>\r\n          <Route index element={<MainPage />} />\r\n          <Route path=\"feed\">\r\n            <Route index element={<FeedPage />} />\r\n            <Route path=\":id\" element={<OrderInfo />} />\r\n          </Route>\r\n          <Route path=\"login\" element={<LoginPage />} />\r\n          <Route path=\"register\" element={<RegisterPage />} />\r\n          <Route path=\"forgot-password\" element={<ForgotPasswordPage />} />\r\n          <Route path=\"reset-password\" element={<ResetPasswordPage />} />\r\n          <Route\r\n            path=\"profile\"\r\n            element={\r\n              <RequireAuth>\r\n                <ProfileLayout />\r\n              </RequireAuth>\r\n            }\r\n          >\r\n            <Route index element={<ProfilePage />} />\r\n            <Route path=\"orders\" element={<OrdersPage />} />\r\n          </Route>\r\n          <Route path=\"/profile/orders/:id\" element={<OrderInfo />} />\r\n          <Route path=\"/ingredients/:id\" element={<IngredientDetails />} />\r\n          <Route path=\"*\" element={<NotFoundPage />} />\r\n        </Route>\r\n      </Routes>\r\n      {backgroundLocation && (\r\n        <Routes>\r\n          <Route\r\n            path=\"/ingredients/:id\"\r\n            element={\r\n              <Modal\r\n                header=\"Детали ингредиента\"\r\n                closeHandler={handleModalClose}\r\n              >\r\n                <IngredientDetails />\r\n              </Modal>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/feed/:id\"\r\n            element={\r\n              <Modal closeHandler={handleModalClose}>\r\n                <OrderInfo />\r\n              </Modal>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/profile/orders/:id\"\r\n            element={\r\n              <Modal closeHandler={handleModalClose}>\r\n                <OrderInfo />\r\n              </Modal>\r\n            }\r\n          />\r\n        </Routes>\r\n      )}\r\n      {isLoading && (\r\n        <ModalOverlay>\r\n          <HashLoader\r\n            color=\"#0cc\"\r\n            loading={isLoading}\r\n            css={override}\r\n            size={150}\r\n          />\r\n        </ModalOverlay>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { useEffect, useCallback, FC } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ModalOverlay from './modal-overlay/modal-overlay';\r\nimport styles from './modal.module.css';\r\nimport { closeModals } from '../../services/slices/modal-slice';\r\nimport { IModalProps } from '../../utils/types';\r\nimport { useAppDispatch } from '../../services/store';\r\n\r\nconst modalRoot: HTMLDivElement = document.getElementById('react-modals') as HTMLDivElement;\r\n\r\nconst Modal: FC<IModalProps> = ({ children, header, closeHandler }) => {\r\n  const dispatch = useAppDispatch();\r\n  const popupClose = useCallback(() => {\r\n    dispatch(closeModals());\r\n  }, [dispatch]);\r\n\r\n  const onClose = closeHandler ?? popupClose;\r\n\r\n  useEffect(() => {\r\n    const handleEscapeClose = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleEscapeClose);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscapeClose);\r\n    };\r\n  }, [onClose]);\r\n\r\n  return ReactDOM.createPortal(\r\n    <ModalOverlay closeHandler={closeHandler}>\r\n      <div className={`${styles.root} pt-10 pr-10 pb-10 pl-10`}>\r\n        {header && (\r\n          <h2 className={`text text_type_main-large ${styles.header}`}>\r\n            {header}\r\n          </h2>\r\n        )}\r\n        <span className={styles.close}>\r\n          <CloseIcon type=\"primary\" onClick={onClose} />\r\n        </span>\r\n        {children}\r\n      </div>\r\n    </ModalOverlay>,\r\n    modalRoot,\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n","export default __webpack_public_path__ + \"static/media/done.e036971b.png\";","import { FC } from 'react';\r\nimport styles from './order-details.module.css';\r\nimport doneIcon from '../../assets/images/done.png';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppSelector } from '../../services/store';\r\n\r\nconst OrderDetails: FC = () => {\r\n  const orderId = useAppSelector((state: TRootState) => state.order.info?.number)\r\n  return (\r\n    <article className={`${styles.root}`}>\r\n      <p className={`${styles.order} text text_type_digits-large mt-20 mb-8`}>\r\n        {orderId}\r\n      </p>\r\n      <p className=\"text text_type_main-medium mb-15\">идентификатор заказа</p>\r\n      <img src={doneIcon} alt=\"Иконка 'Готово'\" className=\"mb-15\" />\r\n      <p className=\"text text_type_main-default mb-2\">\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive mb-20\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default OrderDetails;\r\n","import React, { useCallback, FC } from 'react';\r\nimport { useRef } from 'react';\r\nimport { DropTargetMonitor, useDrag, useDrop, XYCoord } from 'react-dnd';\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './draggable-constructor-element.module.css';\r\nimport {\r\n  removeCompositionItem,\r\n  swapItems,\r\n} from '../../../services/slices/composition-slice';\r\nimport { IDraggableConstructorElementProps, TIngredient } from '../../../utils/types';\r\nimport { useAppDispatch } from '../../../services/store';\r\n\r\n\r\nconst DraggableConstructorElement: FC<IDraggableConstructorElementProps> = React.memo(({ item, index }) => {\r\n  const id = item.id;\r\n  const dispatch = useAppDispatch();\r\n\r\n  const ref = useRef<HTMLLIElement>(null);\r\n\r\n  const swapIngredients = useCallback(\r\n    (dragIndex: number, hoverIndex: number) => {\r\n      dispatch(swapItems({ dragIndex, hoverIndex }));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: 'element',\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      };\r\n    },\r\n    hover(item: TIngredient, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index;\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      const hoverClientY = (clientOffset as XYCoord).y  - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      swapIngredients(dragIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n  const [, drag] = useDrag({\r\n    type: 'element',\r\n    item: () => {\r\n      return { id, index };\r\n    },\r\n  });\r\n\r\n  drag(drop(ref));\r\n\r\n  function deleteIngredient(ingredient: TIngredient, index: number) {\r\n    dispatch(removeCompositionItem({ index, ingredient }));\r\n  }\r\n\r\n  return (\r\n    <li\r\n      className={`${styles.element} mb-4`}\r\n      ref={ref}\r\n      data-handler-id={handlerId}\r\n    >\r\n      <DragIcon type=\"primary\" />\r\n      <ConstructorElement\r\n        text={item.name}\r\n        price={item.price}\r\n        thumbnail={item.image}\r\n        handleClose={() => deleteIngredient(item, index)}\r\n      />\r\n    </li>\r\n  );\r\n});\r\n\r\nexport default DraggableConstructorElement;\r\n","import React, { useMemo, FC } from 'react';\r\nimport { useNavigate } from 'react-router';\r\nimport {\r\n  Button,\r\n  ConstructorElement,\r\n  CurrencyIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport Modal from '../modal/modal';\r\nimport OrderDetails from '../order-details/order-details';\r\nimport DraggableConstructorElement from './draggable-constructor-element/draggable-constructor-element';\r\nimport styles from './burger-constructor.module.css';\r\nimport {\r\n  addCompositionItem,\r\n  selectActiveBun,\r\n} from '../../services/slices/composition-slice';\r\nimport { checkout } from '../../services/slices/order-slice';\r\nimport { useDrop } from 'react-dnd';\r\nimport { TIngredient } from '../../utils/types';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\nimport { TRootState } from '../../services/rootReducer';\r\n\r\nconst BurgerConstructor: FC = React.memo(() => {\r\n  const [{ isHover }, dropTarget] = useDrop({\r\n    accept: 'ingredient',\r\n    drop(item: TIngredient) {\r\n      handleDrop(item._id);\r\n    },\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n  });\r\n  const outline = isHover ? '2px dashed lightgreen' : 'none';\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n  const { ingredients } = useAppSelector((state: TRootState) => ({\r\n    ingredients: state.ingredients.all,\r\n  }));\r\n  const { components, activeBun } = useAppSelector((state: TRootState) => state.composition);\r\n  const { isLoggedIn } = useAppSelector((state: TRootState) => state.auth);\r\n  const isModalOpen = useAppSelector((state: TRootState) => state.isModalOpen.order);\r\n\r\n  const totalPrice = useMemo<number>(\r\n    () =>\r\n      components.reduce(\r\n        (acc: number, val: TIngredient) => acc + val.price,\r\n        !!activeBun ? activeBun.price * 2 : 0,\r\n      ),\r\n    [components, activeBun],\r\n  );\r\n\r\n  function handleCheckout() {\r\n    if (!isLoggedIn) return navigate('/login');\r\n    const composition = [activeBun, ...components, activeBun];\r\n    const data = composition.map((i) => i?._id);\r\n    dispatch((checkout)({ ingredients: data }));\r\n  }\r\n\r\n  function handleDrop(itemId: string) {\r\n    const ingredient = ingredients && ingredients.find((i: TIngredient) => i._id === itemId);\r\n    if (ingredient?.type !== 'bun') dispatch(addCompositionItem(ingredient));\r\n    else dispatch(selectActiveBun(ingredient));\r\n  }\r\n\r\n  const modal = (\r\n    <Modal>\r\n      <OrderDetails />\r\n    </Modal>\r\n  );\r\n\r\n  return (\r\n    <section className={styles.section}>\r\n      <div className=\"mt-25 mb-10 ml-4\" ref={dropTarget} style={{ outline }}>\r\n        <span className=\"pl-8\">\r\n          {activeBun ? (\r\n            <ConstructorElement\r\n              type=\"top\"\r\n              isLocked={true}\r\n              text={`${activeBun.name} (верх)`}\r\n              price={activeBun.price}\r\n              thumbnail={activeBun.image}\r\n            />\r\n          ) : (\r\n            <span>Выберите булку</span>\r\n          )}\r\n        </span>\r\n        <ul className={`${styles.scrollArea} mt-4 mb-4`}>\r\n          {components.map((item: TIngredient, index: number) => (\r\n            <DraggableConstructorElement\r\n              item={item}\r\n              index={index}\r\n              key={item.uuid}\r\n            />\r\n          ))}\r\n        </ul>\r\n        <span className=\"pl-8\">\r\n          {activeBun ? (\r\n            <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked={true}\r\n              text={`${activeBun.name} (низ)`}\r\n              price={activeBun.price}\r\n              thumbnail={activeBun.image}\r\n            />\r\n          ) : (\r\n            <span>Выберите булку</span>\r\n          )}\r\n        </span>\r\n      </div>\r\n      <div className={`${styles.total} mr-5`}>\r\n        {!!activeBun && components.length > 0 && (\r\n          <Button type=\"primary\" size=\"large\" onClick={handleCheckout}>\r\n            Оформить заказ\r\n          </Button>\r\n        )}\r\n        <p className={`${styles.price} mr-10`}>\r\n          <span className=\"text text_type_digits-medium\">\r\n            {totalPrice}&nbsp;\r\n          </span>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </p>\r\n      </div>\r\n      {isModalOpen && modal}\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default BurgerConstructor;\r\n","import React, { FC } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport {\r\n  Counter,\r\n  CurrencyIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './ingredient-card.module.css';\r\nimport { useDrag } from 'react-dnd';\r\nimport { IIngredientCardProps } from '../../../utils/types';\r\n\r\nconst IngredientCard: FC<IIngredientCardProps> = React.memo(({ data }) => {\r\n  const location = useLocation();\r\n  const { _id } = data;\r\n  const [, dragRef] = useDrag({\r\n    type: 'ingredient',\r\n    item: { _id },\r\n  });\r\n\r\n  return (\r\n    <Link\r\n      to={`/ingredients/${_id}`}\r\n      state={{ backgroundLocation: location }}\r\n      className={styles.link}\r\n      ref={dragRef}\r\n    >\r\n      <figure className={styles.figure}>\r\n        <img src={data.image} alt={data.name} className={styles.picture} />\r\n        {!!data.count && <Counter count={data.count} size=\"default\" />}\r\n        <p className={`${styles.price} mt-2 mb-2`}>\r\n          <span className=\"text text_type_digits-default text_color_primary\">\r\n            {data.price}&nbsp;\r\n          </span>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </p>\r\n        <figcaption\r\n          className={`text text_type_main-default text_color_primary ${styles.caption}`}\r\n        >\r\n          {data.name}\r\n        </figcaption>\r\n      </figure>\r\n    </Link>\r\n  );\r\n});\r\n\r\nexport default IngredientCard;\r\n","import React, { useRef, FC } from 'react';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport IngredientCard from './ingredient-card/ingredient-card';\r\nimport styles from './burger-ingredients.module.css';\r\nimport { useTopType } from '../../hooks/useTopType';\r\nimport { TIngredient, TIngredientType } from '../../utils/types';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppSelector } from '../../services/store';\r\n\r\nconst BurgerIngredients:FC = React.memo(() => {\r\n  const { ingredients, types } = useAppSelector((state: TRootState) => ({\r\n    ingredients: state.ingredients.all,\r\n    types: state.ingredients.types,\r\n  }));\r\n\r\n  const bunRef = useRef<HTMLDivElement>(null);\r\n  const sauceRef = useRef<HTMLDivElement>(null);\r\n  const mainRef = useRef<HTMLDivElement>(null);\r\n  const { listRef, onScroll, topType } = useTopType([\r\n    bunRef,\r\n    sauceRef,\r\n    mainRef,\r\n  ]);\r\n\r\n  return (\r\n    <section className={styles.section}>\r\n      <h2 className=\"text text_type_main-large mt-10 mb-5\">Соберите бургер</h2>\r\n      <div className={styles.tabs}>\r\n        {types.map((type: TIngredientType) => {\r\n          const ref =\r\n            type.slug === 'bun'\r\n              ? bunRef\r\n              : type.slug === 'sauce'\r\n              ? sauceRef\r\n              : mainRef;\r\n          return (\r\n            <Tab\r\n              key={type.slug}\r\n              value={type.slug}\r\n              active={type.slug === topType}\r\n              onClick={() =>\r\n                ref.current?.scrollIntoView({\r\n                  behavior: 'smooth',\r\n                  block: 'nearest',\r\n                  inline: 'nearest',\r\n                })\r\n              }\r\n            >\r\n              {type.title}\r\n            </Tab>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className={styles.scrollArea} ref={listRef} onScroll={onScroll}>\r\n        {types.map((type:TIngredientType, index: number) => {\r\n          const ref =\r\n            type.slug === 'bun'\r\n              ? bunRef\r\n              : type.slug === 'sauce'\r\n              ? sauceRef\r\n              : mainRef;\r\n          return (\r\n            <article\r\n              key={index}\r\n              className={`mt-10 ${styles.ingredients}`}\r\n              ref={ref}\r\n              id={type.slug}\r\n            >\r\n              <h2 className=\"text text_type_main-medium mb-6\">{type.title}</h2>\r\n              <ul className={`${styles.cards} pl-4`}>\r\n                {ingredients\r\n                  ?.filter((i: TIngredient) => i.type === type.slug)\r\n                  .map((i: TIngredient) => (\r\n                    <li key={i._id}>\r\n                      <IngredientCard data={i} />\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </article>\r\n          );\r\n        })}\r\n      </div>\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default BurgerIngredients;\r\n","import { useCallback, useRef, useState, RefObject } from 'react';\r\nimport { IUseTopType } from '../utils/types';\r\n\r\nexport const useTopType = (\r\n  items: Array<RefObject<HTMLElement>>,\r\n): IUseTopType => {\r\n  const listRef = useRef<HTMLDivElement>(null);\r\n  const [topType, setTopType] = useState<string>('bun');\r\n\r\n  const onScroll = useCallback(() => {\r\n    const listTop = (listRef.current as HTMLElement)?.getBoundingClientRect().top;   \r\n    let id = '';\r\n    let minDiff = Number.MAX_VALUE;\r\n    for (let item of items) {\r\n      const diff = Math.abs(\r\n        (item.current as HTMLElement)?.getBoundingClientRect().top - listTop,\r\n      );\r\n      if (diff >= 0 && minDiff > diff) {\r\n        minDiff = diff;\r\n        id = (item.current as HTMLElement)?.id;\r\n      }\r\n    }\r\n    if (id && id !== topType) setTopType(id);\r\n  }, [items, topType]);\r\n\r\n  return { listRef, onScroll, topType };\r\n};\r\n","import { useEffect, useState, FC } from 'react';\r\nimport { useParams, useLocation } from 'react-router';\r\nimport styles from './ingredient-details.module.css';\r\nimport { TIngredient } from '../../utils/types';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\n\r\nconst IngredientDetails: FC = () => {\r\n  const { id } = useParams();\r\n  const dispatch = useAppDispatch();\r\n  const ingredients = useAppSelector((state: TRootState) => state.ingredients.all);\r\n  const [data, setData] = useState<TIngredient | null>(null);\r\n  const location = useLocation();\r\n  const backgroundLocation = location.state?.backgroundLocation;\r\n\r\n  useEffect(() => {\r\n    const selectedIngredient: TIngredient | undefined = ingredients?.find(\r\n      (i: TIngredient) => i._id === id,\r\n    );\r\n    if (!data && selectedIngredient) {\r\n      setData(selectedIngredient);\r\n    }\r\n  }, [ingredients, data, id, dispatch]);\r\n\r\n  return (\r\n    <figure className={styles.root}>\r\n      {!backgroundLocation && (\r\n        <h2 className={`text text_type_main-large ${styles.header}`}>\r\n          Детали ингредиента\r\n        </h2>\r\n      )}\r\n      {data && (\r\n        <>\r\n          <img\r\n            src={data.image_large}\r\n            alt={data.name}\r\n            className={styles.picture}\r\n          />\r\n          <figcaption className=\"text text_type_main-medium mt-4 mb-8\">\r\n            {data.name}\r\n          </figcaption>\r\n          <div className={`${styles.nutrients} text_color_inactive mb-5`}>\r\n            <p className={`${styles.info} mr-5`}>\r\n              <span className=\"text text_type_main-default\">Калории,ккал</span>\r\n              <span className=\"text text_type_digits-default\">\r\n                {data.calories}\r\n              </span>\r\n            </p>\r\n            <p className={`${styles.info} mr-5`}>\r\n              <span className=\"text text_type_main-default\">Белки, г</span>\r\n              <span className=\"text text_type_digits-default\">\r\n                {data.proteins}\r\n              </span>\r\n            </p>\r\n            <p className={`${styles.info} mr-5`}>\r\n              <span className=\"text text_type_main-default\">Жиры, г</span>\r\n              <span className=\"text text_type_digits-default\">{data.fat}</span>\r\n            </p>\r\n            <p className={styles.info}>\r\n              <span className=\"text text_type_main-default\">Углеводы, г</span>\r\n              <span className=\"text text_type_digits-default\">\r\n                {data.carbohydrates}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </>\r\n      )}\r\n    </figure>\r\n  );\r\n};\r\n\r\nexport default IngredientDetails;\r\n","import { useEffect, useState, FC } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport styles from './order-info.module.css';\r\nimport { TOrder, TIngredientCount } from '../../utils/types';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { OrderItem } from '..';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport formatDate from '../../utils/date';\r\nimport { useAppDispatch, useAppSelector } from '../../services/store';\r\nimport { loadFeed, closeFeed } from '../../services/slices/feed-slice';\r\nimport getStatus from '../../utils/status';\r\n\r\nconst OrderInfo: FC = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { id } = useParams();\r\n  const { orders, allIngredients } = useAppSelector((state: TRootState) => ({\r\n    orders: state.feed.all,\r\n    allIngredients: state.ingredients.all,\r\n  }));\r\n  const [data, setData] = useState<TOrder | null>(null);\r\n  const [ingredients, setIngredients] =\r\n    useState<Array<TIngredientCount> | null>(null);\r\n  const [price, setPrice] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    if (orders.length === 0) {\r\n      dispatch(loadFeed());\r\n      return () => {\r\n        dispatch(closeFeed());\r\n      };\r\n    }\r\n  }, [dispatch, orders]);\r\n\r\n  useEffect(() => {\r\n    const selectedOrder: TOrder | undefined = orders?.find(\r\n      (i: TOrder) => i._id === id,\r\n    );\r\n\r\n    if (!data && selectedOrder) {\r\n      setData(selectedOrder);\r\n      const ingredientsArray: Array<TIngredientCount> = [];\r\n      selectedOrder.ingredients.forEach((id) => {\r\n        const i = allIngredients?.find((i) => i._id === id);\r\n        if (i) ingredientsArray.push({ ...i, count: 1 });\r\n      });\r\n\r\n      const price = ingredientsArray.reduce(\r\n        (acc: number, val: any) => acc + val?.price,\r\n        0,\r\n      );\r\n      setPrice(price);\r\n\r\n      const ingredientsCount: Array<TIngredientCount> = [];\r\n      ingredientsArray.forEach((ingredient) => {\r\n        const finded = ingredientsCount.find((i) => i._id === ingredient._id);\r\n        if (finded) {\r\n          if (finded.count) finded.count += 1;\r\n        } else {\r\n          ingredientsCount.push(ingredient);\r\n        }\r\n      });\r\n\r\n      setIngredients(ingredientsCount);\r\n    }\r\n  }, [orders, data, id, allIngredients]);\r\n\r\n  return (\r\n    <main className={`${styles.main} pl-5 pr-5`}>\r\n      <article className={styles.root}>\r\n        <p className=\"text text_type_digits-default\">#0{data?.number}</p>\r\n        <h2 className={`${styles.name} text text_type_main-medium mt-10 mb-3`}>\r\n          {data?.name}\r\n        </h2>\r\n        <p className={`${styles.status} text text_type_main-default`}>\r\n          {getStatus(data?.status)}\r\n        </p>\r\n        <p className={`${styles.name} text text_type_main-medium mt-15 mb-6`}>\r\n          Состав:\r\n        </p>\r\n        <ul className={styles.scrollArea}>\r\n          {ingredients?.map((i, index) => (\r\n            <li key={index}>{<OrderItem data={i} key={i._id} />}</li>\r\n          ))}\r\n        </ul>\r\n        <div className={`${styles.bottom} mt-10`}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {formatDate(data?.createdAt)}\r\n          </p>\r\n          <p className={styles.price}>\r\n            <span className=\"text text_type_digits-default text_color_primary mr-2\">\r\n              {price}\r\n            </span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </p>\r\n        </div>\r\n      </article>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default OrderInfo;\r\n","import React, { FC } from 'react';\r\nimport styles from './order-item.module.css';\r\nimport { IOrderItemProps } from '../../../utils/types';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport IngredientPreview from '../../feed-list/ingredient-preview/ingredient-preview';\r\n\r\nconst OrderItem: FC<IOrderItemProps> = React.memo(({ data }) => {\r\n  return (\r\n    <div className={`${styles.root} mb-4`}>\r\n      <IngredientPreview data={data} />\r\n      <h3 className={`${styles.title} text text_type_main-default ml-4`}>\r\n        {data.name}\r\n      </h3>\r\n      <p className={styles.price}>\r\n        <span className=\"text text_type_digits-default text_color_primary mr-2\">\r\n          {data.count} x {data.price}\r\n        </span>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </p>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default OrderItem;\r\n","import { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './auth-form.module.css';\r\nimport { IAuthFormProps } from '../../utils/types';\r\n\r\nconst AuthForm: FC<IAuthFormProps> = ({\r\n  header,\r\n  children,\r\n  buttonText,\r\n  formInfo,\r\n  onSubmit,\r\n  isValid,\r\n  error,\r\n}) => {\r\n  return (\r\n    <main className={`${styles.main}`}>\r\n      <h1 className={`${styles.heading} text text_type_main-medium pb-6`}>\r\n        {header}\r\n      </h1>\r\n      <form className={`${styles.form} mb-20`} onSubmit={onSubmit}>\r\n        {!!error && <p>{error}</p>}\r\n        {children}\r\n        <Button disabled={!isValid}>{buttonText}</Button>\r\n      </form>\r\n\r\n      {formInfo &&\r\n        formInfo.map((data, idx) => (\r\n          <p\r\n            key={idx}\r\n            className={`${styles.info} text text_type_main-default text_color_inactive mb-4`}\r\n          >\r\n            {data.text}{' '}\r\n            <Link to={data.linkUrl} className=\"link\">\r\n              {data.linkTitle}\r\n            </Link>\r\n          </p>\r\n        ))}\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default AuthForm;\r\n","import { NavLink, useMatch, useNavigate } from 'react-router-dom';\r\nimport { signOut } from '../../services/slices/auth-slice';\r\nimport styles from './profile-navigation.module.css';\r\nimport { FC, MouseEventHandler } from 'react';\r\nimport { useAppDispatch } from '../../services/store';\r\n\r\nconst ProfileNavigation: FC = () => {\r\n  const isProfilePage = useMatch('/profile');\r\n  const isOrdersPage = useMatch('/profile/orders');\r\n  const navigate = useNavigate();\r\n  const linkStyle: string = `${styles.link} text text_type_main-medium text_color_inactive`;\r\n\r\n  const dispatch = useAppDispatch();\r\n  const logout: MouseEventHandler<HTMLAnchorElement> = (e) => {\r\n    e.preventDefault();\r\n    dispatch(signOut());\r\n    return navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <nav>\r\n      <ul className={styles.list}>\r\n        <li>\r\n          <NavLink\r\n            to=\"/profile\"\r\n            className={`${linkStyle} ${isProfilePage && styles.active}`}\r\n          >\r\n            Профиль\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink\r\n            to=\"/profile/orders\"\r\n            className={`${linkStyle} ${isOrdersPage && styles.active}`}\r\n          >\r\n            История\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink\r\n            to=\"/\"\r\n            onClick={logout}\r\n            className={({ isActive }) =>\r\n              `${styles.link} text text_type_main-medium text_color_inactive ${\r\n                isActive && styles.active\r\n              }`\r\n            }\r\n          >\r\n            Выход\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n      <p className=\"text text_type_main-small text_color_inactive mt-20\">\r\n        В этом разделе вы можете изменить свои персональные данные\r\n      </p>\r\n    </nav>\r\n  );\r\n}\r\nexport default ProfileNavigation;\r\n","import { FC, ReactElement } from 'react';\r\nimport { Navigate } from 'react-router';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppSelector } from '../../services/store';\r\nimport { IRequireAuthProps } from '../../utils/types';\r\n\r\nconst RequireAuth: FC<IRequireAuthProps> = ({ children, redirectTo = '/login' }) => {\r\n  const { isLoggedIn } = useAppSelector((store: TRootState) => store.auth);\r\n  return (isLoggedIn ? children : <Navigate to={redirectTo} />) as ReactElement;\r\n}\r\n\r\nexport default RequireAuth;\r\n","import { FC } from 'react';\r\nimport { NavLink, useMatch, Link } from 'react-router-dom';\r\nimport {\r\n  BurgerIcon,\r\n  Logo,\r\n  ListIcon,\r\n  ProfileIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './app-header.module.css';\r\n\r\nconst AppHeader: FC = () => {\r\n  const isMainPage = useMatch('/');\r\n  const isFeedPage = useMatch('/feed');\r\n  const isProfilePage = useMatch('/profile/*');\r\n\r\n  return (\r\n    <header className={styles.header}>\r\n      <nav className={styles.nav}>\r\n        <ul className={styles.menu}>\r\n          <li className={`${styles.item} pl-5 pr-5 mr-2`}>\r\n            <NavLink\r\n              to=\"/\"\r\n              className={({ isActive }) =>\r\n                `${\r\n                  styles.link\r\n                } text text_type_main-default text_color_inactive ${\r\n                  isActive && styles.active\r\n                }`\r\n              }\r\n            >\r\n              <span className=\"mr-2\">\r\n                <BurgerIcon type={isMainPage ? 'primary' : 'secondary'} />\r\n              </span>\r\n              <span className={styles.text}>Конструктор</span>\r\n            </NavLink>\r\n          </li>\r\n          <li className={`${styles.item} pl-5 pr-5 mr-2`}>\r\n            <NavLink\r\n              to=\"/feed\"\r\n              className={({ isActive }) =>\r\n                `${\r\n                  styles.link\r\n                } text text_type_main-default text_color_inactive ${\r\n                  isActive && styles.active\r\n                }`\r\n              }\r\n            >\r\n              <span className=\"mr-2\">\r\n                <ListIcon type={isFeedPage ? 'primary' : 'secondary'} />\r\n              </span>\r\n              <span className={styles.text}>Лента заказов</span>\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n        <Link className={styles.logo} to=\"/\">\r\n          <Logo />\r\n        </Link>\r\n        <ul className={`${styles.menu} ${styles.menu_right}`}>\r\n          <li className={`${styles.item} pl-5 pr-5 mr-2`}>\r\n            <NavLink\r\n              to=\"/profile\"\r\n              className={({ isActive }) =>\r\n                `${\r\n                  styles.link\r\n                } text text_type_main-default text_color_inactive ${\r\n                  isActive && styles.active\r\n                }`\r\n              }\r\n            >\r\n              <span className=\"mr-2\">\r\n                <ProfileIcon type={isProfilePage ? 'primary' : 'secondary'} />\r\n              </span>\r\n              <span className={styles.text}>Личный кабинет</span>\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHeader;\r\n","import { FC } from 'react';\r\nimport { Outlet } from 'react-router-dom';\r\nimport AppHeader from '../app-header/app-header';\r\n\r\nconst Layout: FC = () => {\r\n  return (\r\n    <>\r\n      <AppHeader />\r\n      <Outlet />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Layout;\r\n","import { FC } from 'react';\r\nimport { Outlet } from 'react-router-dom';\r\nimport { ProfileNavigation } from '..';\r\nimport styles from './profile-layout.module.css';\r\n\r\nconst ProfileLayout: FC = () => {\r\n  return (\r\n    <main className={styles.main}>\r\n      <aside className={styles.sidebar}>\r\n        <ProfileNavigation />\r\n      </aside>\r\n      <Outlet />\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default ProfileLayout;\r\n","import React, { FC } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport OrderCard from './order-card/order-card';\r\nimport styles from './feed-list.module.css';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppSelector } from '../../services/store';\r\n\r\nconst FeedList: FC = React.memo(() => {\r\n  const location = useLocation();\r\n  const { orders } = useAppSelector((state: TRootState) => ({\r\n    orders: state.feed.all,\r\n  }));\r\n\r\n  return (\r\n    <section className={styles.section}>\r\n      <h2 className=\"text text_type_main-large mt-10 mb-5\">Лента заказов</h2>\r\n      <ul className={styles.scrollArea}>\r\n        {orders.map((order) => (\r\n          <li key={order._id} className={styles.item}>\r\n            <Link\r\n              to={`/feed/${order._id}`}\r\n              state={{ backgroundLocation: location }}\r\n              className={styles.link}\r\n            >\r\n              <OrderCard data={order} />\r\n            </Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default FeedList;\r\n","import React, { FC } from 'react';\r\nimport { TRootState } from '../../services/rootReducer';\r\nimport { useAppSelector } from '../../services/store';\r\nimport styles from './feed-summary.module.css';\r\n\r\nconst FeedSummary: FC = React.memo(() => {\r\n  const { orders, total, totalToday } = useAppSelector((state: TRootState) => ({\r\n    orders: state.feed.all,\r\n    total: state.feed.total,\r\n    totalToday: state.feed.totalToday,\r\n  }));\r\n\r\n  return (\r\n    <section className={styles.section}>\r\n      <article className={styles.topContainer}>\r\n        <div className={styles.column}>\r\n          <h2 className=\"text text_type_main-medium\">Готовы:</h2>\r\n          <ul className={`${styles.list} mt-6`}>\r\n            {orders\r\n              .filter((orders) => orders.status === 'done')\r\n              .map((order) => (\r\n                <li\r\n                  key={order._id}\r\n                  className={`${styles.orderDone} text text_type_digits-default mb-2`}\r\n                >\r\n                  {order.number}\r\n                </li>\r\n              ))}\r\n          </ul>\r\n        </div>\r\n        <div className={styles.column}>\r\n          <h2 className=\"text text_type_main-medium\">В работе:</h2>\r\n          <ul className={`${styles.list} mt-6`}>\r\n            {orders\r\n              .filter((orders) => orders.status === 'pending')\r\n              .map((order) => (\r\n                <li\r\n                  key={order._id}\r\n                  className={`${styles.orderPending} text text_type_digits-default mb-2`}\r\n                >\r\n                  {order.number}\r\n                </li>\r\n              ))}\r\n          </ul>\r\n        </div>\r\n      </article>\r\n      <article className=\"mt-9\">\r\n        <h2 className=\"text text_type_main-medium\">Выполнено за все время:</h2>\r\n        <p className={`${styles.order} text text_type_digits-large`}>{total}</p>\r\n      </article>\r\n      <article className=\"mt-15\">\r\n        <h2 className=\"text text_type_main-medium\">Выполнено за сегодня:</h2>\r\n        <p className={`${styles.order} text text_type_digits-large`}>\r\n          {totalToday}\r\n        </p>\r\n      </article>\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default FeedSummary;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport { App } from './components';\r\nimport { store } from './services/store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"feed-summary_section__Aw6V0\",\"topContainer\":\"feed-summary_topContainer__10-Id\",\"column\":\"feed-summary_column__38C6W\",\"list\":\"feed-summary_list__1FoJT\",\"orderDone\":\"feed-summary_orderDone__2qskG\",\"orderPending\":\"feed-summary_orderPending__1SBAp\",\"order\":\"feed-summary_order__2RLUn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"order-card_root__2LFRS\",\"container\":\"order-card_container__9btoO\",\"name\":\"order-card_name__326B0\",\"list\":\"order-card_list__AKzLo\",\"item\":\"order-card_item__2gtWu\",\"price\":\"order-card_price__-diZe\",\"statusDone\":\"order-card_statusDone__2tUa8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ingredient-details_root__34ja7\",\"picture\":\"ingredient-details_picture__1pFSX\",\"nutrients\":\"ingredient-details_nutrients__2PQmc\",\"info\":\"ingredient-details_info__3sKKx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-info_main__2Or4f\",\"root\":\"order-info_root__3-ADN\",\"name\":\"order-info_name__32kdw\",\"status\":\"order-info_status__166en\",\"scrollArea\":\"order-info_scrollArea__2esDc\",\"bottom\":\"order-info_bottom__2WH2n\",\"price\":\"order-info_price__2wU2C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"profile-navigation_list__1IfMU\",\"link\":\"profile-navigation_link__vcA1G\",\"active\":\"profile-navigation_active__12XhL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"ingredient-card_link__3bQr1\",\"figure\":\"ingredient-card_figure__1B7QP\",\"price\":\"ingredient-card_price__1lv8R\",\"caption\":\"ingredient-card_caption__19JBH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"burger-ingredients_section__1fyCq\",\"tabs\":\"burger-ingredients_tabs__4rh1m\",\"scrollArea\":\"burger-ingredients_scrollArea__1jZUb\",\"cards\":\"burger-ingredients_cards__1KtHb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"orders-page_section__358-m\",\"scrollArea\":\"orders-page_scrollArea__z89qi\",\"item\":\"orders-page_item__hILMA\",\"link\":\"orders-page_link__GaR-R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"burger-constructor_section__1fkBH\",\"scrollArea\":\"burger-constructor_scrollArea__x8WNO\",\"total\":\"burger-constructor_total__39gSI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"auth-form_main__2l3Lh\",\"heading\":\"auth-form_heading__2VrT-\",\"form\":\"auth-form_form__1RgYR\",\"info\":\"auth-form_info__3wHI2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"feed-list_section__1LHy6\",\"scrollArea\":\"feed-list_scrollArea__3POxY\",\"item\":\"feed-list_item__F0MNo\",\"link\":\"feed-list_link__3RZsC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ingredient-preview_root__3Feru\",\"image\":\"ingredient-preview_image__2Cmix\",\"cover\":\"ingredient-preview_cover__2NjIQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal_root__1bJjw\",\"close\":\"modal_close__77dZc\",\"header\":\"modal_header__349Qp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"order-item_root__vV9c9\",\"title\":\"order-item_title__Gpv9u\",\"price\":\"order-item_price__1PyMh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"profile-page_buttons__kafvo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"not-found-page_main__zAfqb\",\"heading\":\"not-found-page_heading__3OnI_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"order-details_root__134hp\",\"order\":\"order-details_order__1Zt97\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile-layout_main__2m9Yc\",\"sidebar\":\"profile-layout_sidebar__V71hv\"};"],"sourceRoot":""}